import t from"events";const e={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},r={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},i={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},o={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class a{static getFirstMatch(t,e){const r=e.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,e){const r=e.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,e,r){if(t.test(e))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const e=t.split(".").splice(0,2).map(t=>parseInt(t,10)||0);if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const e=t.split(".").splice(0,2).map(t=>parseInt(t,10)||0);if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,e,r=!1){const n=a.getVersionPrecision(t),i=a.getVersionPrecision(e);let o=Math.max(n,i),s=0;const u=a.map([t,e],t=>{const e=o-a.getVersionPrecision(t),r=t+new Array(e+1).join(".0");return a.map(r.split("."),t=>new Array(20-t.length).join("0")+t).reverse()});for(r&&(s=o-Math.min(n,i)),o-=1;o>=s;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===s)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}}static map(t,e){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n+=1)r.push(e(t[n]));return r}static find(t,e){let r,n;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(r=0,n=t.length;r<n;r+=1){const n=t[r];if(e(n,r))return n}}static assign(t,...e){const r=t;let n,i;if(Object.assign)return Object.assign(t,...e);for(n=0,i=e.length;n<i;n+=1){const t=e[n];if("object"==typeof t&&null!==t){Object.keys(t).forEach(e=>{r[e]=t[e]})}}return t}static getBrowserAlias(t){return e[t]}static getBrowserTypeByAlias(t){return r[t]||""}}const s=/version\/(\d+(\.?_?\d+)+)/i,u=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},r=a.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:opera)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},r=a.getFirstMatch(/(?:opr|opios)[\s\/](\S+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},r=a.getFirstMatch(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},r=a.getFirstMatch(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},r=a.getFirstMatch(/(?:swing)[\s\/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:coast)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},r=a.getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:ucbrowser)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:Maxthon|mxios)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:epiphany)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:puffin)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:sleipnir)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/(?:k-meleon)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},r=a.getFirstMatch(/(?:micromessenger)[\s\/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},r=a.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[\/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},r=a.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},r=a.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},r=a.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},r=a.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},r=a.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},r=a.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return r&&(e.version=r),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},r=a.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},r=a.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},r=a.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},r=a.getFirstMatch(s,t)||a.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},r=a.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},r=a.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},r=a.getFirstMatch(/(?:qupzilla)[\s\/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},r=a.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s\/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},r=a.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},r=a.getFirstMatch(/(?:chromium)[\s\/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},r=a.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},r=a.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e={name:"Android Browser"},r=a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},r=a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},r=a.getFirstMatch(s,t);return r&&(e.version=r),e}},{test:[/.*/i],describe(t){const e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.getFirstMatch(e,t),version:a.getSecondMatch(e,t)}}}];var c=[{test:[/Roku\/DVP/],describe(t){const e=a.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:i.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=a.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:i.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=a.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=a.getWindowsVersionName(e);return{name:i.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe(t){const e=a.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return{name:i.iOS,version:e}}},{test:[/macintosh/i],describe(t){const e=a.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=a.getMacOSVersionName(e),n={name:i.MacOS,version:e};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=a.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:i.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e=a.getFirstMatch(/android[\s\/-](\d+(\.\d+)*)/i,t),r=a.getAndroidVersionName(e),n={name:i.Android,version:e};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=a.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:i.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=a.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||a.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||a.getFirstMatch(/\bbb(\d+)/i,t);return{name:i.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=a.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:i.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=a.getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i,t);return{name:i.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:i.Linux})},{test:[/CrOS/],describe:()=>({name:i.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=a.getFirstMatch(/PlayStation 4[\/\s](\d+(\.\d+)*)/i,t);return{name:i.PlayStation4,version:e}}}],l=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=a.getFirstMatch(/(can-l01)/i,t)&&"Nova",r={type:n.mobile,vendor:"Huawei"};return e&&(r.model=e),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:n.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:n.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:()=>({type:n.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:n.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:n.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:n.tablet})},{test(t){const e=t.test(/ipod|iphone/i),r=t.test(/like (ipod|iphone)/i);return e&&!r},describe(t){const e=a.getFirstMatch(/(ipod|iphone)/i,t);return{type:n.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:n.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:n.mobile})},{test:t=>"blackberry"===t.getBrowserName(!0),describe:()=>({type:n.mobile,vendor:"BlackBerry"})},{test:t=>"bada"===t.getBrowserName(!0),describe:()=>({type:n.mobile})},{test:t=>"windows phone"===t.getBrowserName(),describe:()=>({type:n.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:()=>({type:n.tablet})},{test:t=>"android"===t.getOSName(!0),describe:()=>({type:n.mobile})},{test:t=>"macos"===t.getOSName(!0),describe:()=>({type:n.desktop,vendor:"Apple"})},{test:t=>"windows"===t.getOSName(!0),describe:()=>({type:n.desktop})},{test:t=>"linux"===t.getOSName(!0),describe:()=>({type:n.desktop})},{test:t=>"playstation 4"===t.getOSName(!0),describe:()=>({type:n.tv})},{test:t=>"roku"===t.getOSName(!0),describe:()=>({type:n.tv})}],f=[{test:t=>"microsoft edge"===t.getBrowserName(!0),describe(t){if(/\sedg\//i.test(t))return{name:o.Blink};const e=a.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:o.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:o.Trident},r=a.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:o.Presto},r=a.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=t.test(/gecko/i),r=t.test(/like gecko/i);return e&&!r},describe(t){const e={name:o.Gecko},r=a.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:o.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:o.WebKit},r=a.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}}];class h{constructor(t,e=!1){if(null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=a.find(u,t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some(t=>this.test(t));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=a.find(c,t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some(t=>this.test(t));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:e}=this.getOS();return t?String(e).toLowerCase()||"":e||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:e}=this.getPlatform();return t?String(e).toLowerCase()||"":e||""}parsePlatform(){this.parsedResult.platform={};const t=a.find(l,t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some(t=>this.test(t));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=a.find(f,t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some(t=>this.test(t));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return a.assign({},this.parsedResult)}satisfies(t){const e={};let r=0;const n={};let i=0;if(Object.keys(t).forEach(o=>{const a=t[o];"string"==typeof a?(n[o]=a,i+=1):"object"==typeof a&&(e[o]=a,r+=1)}),r>0){const t=Object.keys(e),r=a.find(t,t=>this.isOS(t));if(r){const t=this.satisfies(e[r]);if(void 0!==t)return t}const n=a.find(t,t=>this.isPlatform(t));if(n){const t=this.satisfies(e[n]);if(void 0!==t)return t}}if(i>0){const t=Object.keys(n),e=a.find(t,t=>this.isBrowser(t,!0));if(void 0!==e)return this.compareVersion(n[e])}}isBrowser(t,e=!1){const r=this.getBrowserName().toLowerCase();let n=t.toLowerCase();const i=a.getBrowserTypeByAlias(n);return e&&i&&(n=i.toLowerCase()),n===r}compareVersion(t){let e=[0],r=t,n=!1;const i=this.getBrowserVersion();if("string"==typeof i)return">"===t[0]||"<"===t[0]?(r=t.substr(1),"="===t[1]?(n=!0,r=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?r=t.substr(1):"~"===t[0]&&(n=!0,r=t.substr(1)),e.indexOf(a.compareVersions(i,r,n))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t){return this.isBrowser(t)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(t=>this.is(t))}}class d{static getParser(t,e=!1){if("string"!=typeof t)throw new Error("UserAgent should be a string");return new h(t,e)}static parse(t){return new h(t).getResult()}static get BROWSER_MAP(){return r}static get ENGINE_MAP(){return o}static get OS_MAP(){return i}static get PLATFORMS_MAP(){return n}}var p="function"==typeof Map,g="function"==typeof Set,v="function"==typeof WeakSet,_=Object.keys,m=function(t,e){return t&&"object"==typeof t&&e.add(t)},y=function(t,e,r,n){for(var i,o=0;o<t.length;o++)if(r((i=t[o])[0],e[0],n)&&r(i[1],e[1],n))return!0;return!1},b=function(t,e,r,n){for(var i=0;i<t.length;i++)if(r(t[i],e,n))return!0;return!1},w=function(t,e){return t===e||t!=t&&e!=e},k=function(t){return t.constructor===Object},S=function(t){return"function"==typeof t.then},M=function(t){return!(!t.$$typeof||!t._store)},x=function(t){return function(e){var r=t||e;return function(t,e,n){void 0===n&&(n=v?new WeakSet:Object.create({_values:[],add:function(t){this._values.push(t)},has:function(t){return!!~this._values.indexOf(t)}}));var i=n.has(t),o=n.has(e);return i||o?i&&o:(m(t,n),m(e,n),r(t,e,n))}}},T=function(t){var e=[];return t.forEach(function(t,r){return e.push([r,t])}),e},j=function(t){var e=[];return t.forEach(function(t){return e.push(t)}),e},F=function(t,e,r,n){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!r(t[i],e[i],n))return!1;return!0},O=function(t,e,r,n){if(t.size!==e.size)return!1;for(var i=T(t),o=T(e),a=0;a<i.length;a++)if(!y(o,i[a],r,n)||!y(i,o[a],r,n))return!1;return!0},A=function(t,e,r,n){var i,o=_(t),a=_(e);if(o.length!==a.length)return!1;for(var s=0;s<o.length;s++){if(i=o[s],!b(a,i,w))return!1;if(("_owner"!==i||!M(t)||!M(e))&&!r(t[i],e[i],n))return!1}return!0},E=function(t,e){return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.unicode===e.unicode&&t.sticky===e.sticky&&t.lastIndex===e.lastIndex},I=function(t,e,r,n){if(t.size!==e.size)return!1;for(var i=j(t),o=j(e),a=0;a<i.length;a++)if(!b(o,i[a],r,n)||!b(i,o[a],r,n))return!1;return!0},C=Array.isArray,B=function(t){var e="function"==typeof t?t(r):r;function r(t,r,n){if(w(t,r))return!0;var i=typeof t;if(i!==typeof r||"object"!==i||!t||!r)return!1;if(k(t)&&k(r))return A(t,r,e,n);var o=C(t),a=C(r);if(o||a)return o===a&&F(t,r,e,n);var s=t instanceof Date,u=r instanceof Date;if(s||u)return s===u&&w(t.getTime(),r.getTime());var c=t instanceof RegExp,l=r instanceof RegExp;if(c||l)return c===l&&E(t,r);if(S(t)||S(r))return t===r;if(p){var f=t instanceof Map,h=r instanceof Map;if(f||h)return f===h&&O(t,r,e,n)}if(g){var d=t instanceof Set,v=r instanceof Set;if(d||v)return d===v&&I(t,r,e,n)}return A(t,r,e,n)}return r},P=(B(x()),B(x(w)),B()),R=(B(function(){return w}),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});var L,z=(function(t,e){(function(){var r,n=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="__lodash_hash_undefined__",s=500,u="__lodash_placeholder__",c=1,l=2,f=4,h=1,d=2,p=1,g=2,v=4,_=8,m=16,y=32,b=64,w=128,k=256,S=512,M=30,x="...",T=800,j=16,F=1,O=2,A=1/0,E=9007199254740991,I=1.7976931348623157e308,C=NaN,B=4294967295,P=B-1,L=B>>>1,z=[["ary",w],["bind",p],["bindKey",g],["curry",_],["curryRight",m],["flip",S],["partial",y],["partialRight",b],["rearg",k]],N="[object Arguments]",W="[object Array]",D="[object AsyncFunction]",q="[object Boolean]",U="[object Date]",V="[object DOMException]",$="[object Error]",G="[object Function]",H="[object GeneratorFunction]",Z="[object Map]",K="[object Number]",Q="[object Null]",J="[object Object]",Y="[object Proxy]",X="[object RegExp]",tt="[object Set]",et="[object String]",rt="[object Symbol]",nt="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",at="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",ct="[object Float64Array]",lt="[object Int8Array]",ft="[object Int16Array]",ht="[object Int32Array]",dt="[object Uint8Array]",pt="[object Uint8ClampedArray]",gt="[object Uint16Array]",vt="[object Uint32Array]",_t=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,wt=/[&<>"']/g,kt=RegExp(bt.source),St=RegExp(wt.source),Mt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/[\\^$.*+?()[\]{}|]/g,Et=RegExp(At.source),It=/^\s+|\s+$/g,Ct=/^\s+/,Bt=/\s+$/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Ut=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Gt=/^(?:0|[1-9]\d*)$/,Ht=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yt="[\\ud800-\\udfff]",Xt="["+Jt+"]",te="["+Qt+"]",ee="\\d+",re="[\\u2700-\\u27bf]",ne="[a-z\\xdf-\\xf6\\xf8-\\xff]",ie="[^\\ud800-\\udfff"+Jt+ee+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",oe="\\ud83c[\\udffb-\\udfff]",ae="[^\\ud800-\\udfff]",se="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",ce="[A-Z\\xc0-\\xd6\\xd8-\\xde]",le="(?:"+ne+"|"+ie+")",fe="(?:"+ce+"|"+ie+")",he="(?:"+te+"|"+oe+")"+"?",de="[\\ufe0e\\ufe0f]?"+he+("(?:\\u200d(?:"+[ae,se,ue].join("|")+")[\\ufe0e\\ufe0f]?"+he+")*"),pe="(?:"+[re,se,ue].join("|")+")"+de,ge="(?:"+[ae+te+"?",te,se,ue,Yt].join("|")+")",ve=RegExp("['’]","g"),_e=RegExp(te,"g"),me=RegExp(oe+"(?="+oe+")|"+ge+de,"g"),ye=RegExp([ce+"?"+ne+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Xt,ce,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Xt,ce+le,"$"].join("|")+")",ce+"?"+le+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ee,pe].join("|"),"g"),be=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),we=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Se=-1,Me={};Me[ut]=Me[ct]=Me[lt]=Me[ft]=Me[ht]=Me[dt]=Me[pt]=Me[gt]=Me[vt]=!0,Me[N]=Me[W]=Me[at]=Me[q]=Me[st]=Me[U]=Me[$]=Me[G]=Me[Z]=Me[K]=Me[J]=Me[X]=Me[tt]=Me[et]=Me[it]=!1;var xe={};xe[N]=xe[W]=xe[at]=xe[st]=xe[q]=xe[U]=xe[ut]=xe[ct]=xe[lt]=xe[ft]=xe[ht]=xe[Z]=xe[K]=xe[J]=xe[X]=xe[tt]=xe[et]=xe[rt]=xe[dt]=xe[pt]=xe[gt]=xe[vt]=!0,xe[$]=xe[G]=xe[it]=!1;var Te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,Fe=parseInt,Oe="object"==typeof R&&R&&R.Object===Object&&R,Ae="object"==typeof self&&self&&self.Object===Object&&self,Ee=Oe||Ae||Function("return this")(),Ie=e&&!e.nodeType&&e,Ce=Ie&&t&&!t.nodeType&&t,Be=Ce&&Ce.exports===Ie,Pe=Be&&Oe.process,Re=function(){try{var t=Ce&&Ce.require&&Ce.require("util").types;return t||Pe&&Pe.binding&&Pe.binding("util")}catch(t){}}(),Le=Re&&Re.isArrayBuffer,ze=Re&&Re.isDate,Ne=Re&&Re.isMap,We=Re&&Re.isRegExp,De=Re&&Re.isSet,qe=Re&&Re.isTypedArray;function Ue(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ve(t,e,r,n){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}function $e(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Ge(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function He(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Ze(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}function Ke(t,e){return!!(null==t?0:t.length)&&or(t,e,0)>-1}function Qe(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function Je(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Ye(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Xe(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function tr(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function er(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var rr=cr("length");function nr(t,e,r){var n;return r(t,function(t,r,i){if(e(t,r,i))return n=r,!1}),n}function ir(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function or(t,e,r){return e==e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):ir(t,sr,r)}function ar(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function sr(t){return t!=t}function ur(t,e){var r=null==t?0:t.length;return r?hr(t,e)/r:C}function cr(t){return function(e){return null==e?r:e[t]}}function lr(t){return function(e){return null==t?r:t[e]}}function fr(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function hr(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function dr(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function pr(t){return function(e){return t(e)}}function gr(t,e){return Je(e,function(e){return t[e]})}function vr(t,e){return t.has(e)}function _r(t,e){for(var r=-1,n=t.length;++r<n&&or(e,t[r],0)>-1;);return r}function mr(t,e){for(var r=t.length;r--&&or(e,t[r],0)>-1;);return r}var yr=lr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),br=lr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wr(t){return"\\"+Te[t]}function kr(t){return be.test(t)}function Sr(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Mr(t,e){return function(r){return t(e(r))}}function xr(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var a=t[r];a!==e&&a!==u||(t[r]=u,o[i++]=r)}return o}function Tr(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function jr(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Fr(t){return kr(t)?function(t){var e=me.lastIndex=0;for(;me.test(t);)++e;return e}(t):rr(t)}function Or(t){return kr(t)?function(t){return t.match(me)||[]}(t):function(t){return t.split("")}(t)}var Ar=lr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Er=function t(e){var R,Qt=(e=null==e?Ee:Er.defaults(Ee.Object(),e,Er.pick(Ee,ke))).Array,Jt=e.Date,Yt=e.Error,Xt=e.Function,te=e.Math,ee=e.Object,re=e.RegExp,ne=e.String,ie=e.TypeError,oe=Qt.prototype,ae=Xt.prototype,se=ee.prototype,ue=e["__core-js_shared__"],ce=ae.toString,le=se.hasOwnProperty,fe=0,he=(R=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",de=se.toString,pe=ce.call(ee),ge=Ee._,me=re("^"+ce.call(le).replace(At,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Be?e.Buffer:r,Te=e.Symbol,Oe=e.Uint8Array,Ae=be?be.allocUnsafe:r,Ie=Mr(ee.getPrototypeOf,ee),Ce=ee.create,Pe=se.propertyIsEnumerable,Re=oe.splice,rr=Te?Te.isConcatSpreadable:r,lr=Te?Te.iterator:r,Ir=Te?Te.toStringTag:r,Cr=function(){try{var t=No(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Br=e.clearTimeout!==Ee.clearTimeout&&e.clearTimeout,Pr=Jt&&Jt.now!==Ee.Date.now&&Jt.now,Rr=e.setTimeout!==Ee.setTimeout&&e.setTimeout,Lr=te.ceil,zr=te.floor,Nr=ee.getOwnPropertySymbols,Wr=be?be.isBuffer:r,Dr=e.isFinite,qr=oe.join,Ur=Mr(ee.keys,ee),Vr=te.max,$r=te.min,Gr=Jt.now,Hr=e.parseInt,Zr=te.random,Kr=oe.reverse,Qr=No(e,"DataView"),Jr=No(e,"Map"),Yr=No(e,"Promise"),Xr=No(e,"Set"),tn=No(e,"WeakMap"),en=No(ee,"create"),rn=tn&&new tn,nn={},on=fa(Qr),an=fa(Jr),sn=fa(Yr),un=fa(Xr),cn=fa(tn),ln=Te?Te.prototype:r,fn=ln?ln.valueOf:r,hn=ln?ln.toString:r;function dn(t){if(Fs(t)&&!_s(t)&&!(t instanceof _n)){if(t instanceof vn)return t;if(le.call(t,"__wrapped__"))return ha(t)}return new vn(t)}var pn=function(){function t(){}return function(e){if(!js(e))return{};if(Ce)return Ce(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function gn(){}function vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function _n(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function mn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function yn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function wn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new bn;++e<r;)this.add(t[e])}function kn(t){var e=this.__data__=new yn(t);this.size=e.size}function Sn(t,e){var r=_s(t),n=!r&&vs(t),i=!r&&!n&&ws(t),o=!r&&!n&&!i&&Rs(t),a=r||n||i||o,s=a?dr(t.length,ne):[],u=s.length;for(var c in t)!e&&!le.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Go(c,u))||s.push(c);return s}function Mn(t){var e=t.length;return e?t[wi(0,e-1)]:r}function xn(t,e){return ua(ro(t),Bn(e,0,t.length))}function Tn(t){return ua(ro(t))}function jn(t,e,n){(n===r||ds(t[e],n))&&(n!==r||e in t)||In(t,e,n)}function Fn(t,e,n){var i=t[e];le.call(t,e)&&ds(i,n)&&(n!==r||e in t)||In(t,e,n)}function On(t,e){for(var r=t.length;r--;)if(ds(t[r][0],e))return r;return-1}function An(t,e,r,n){return Nn(t,function(t,i,o){e(n,t,r(t),o)}),n}function En(t,e){return t&&no(e,iu(e),t)}function In(t,e,r){"__proto__"==e&&Cr?Cr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Cn(t,e){for(var n=-1,i=e.length,o=Qt(i),a=null==t;++n<i;)o[n]=a?r:Xs(t,e[n]);return o}function Bn(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Pn(t,e,n,i,o,a){var s,u=e&c,h=e&l,d=e&f;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!js(t))return t;var p=_s(t);if(p){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!u)return ro(t,s)}else{var g=qo(t),v=g==G||g==H;if(ws(t))return Qi(t,u);if(g==J||g==N||v&&!o){if(s=h||v?{}:Vo(t),!u)return h?function(t,e){return no(t,Do(t),e)}(t,function(t,e){return t&&no(e,ou(e),t)}(s,t)):function(t,e){return no(t,Wo(t),e)}(t,En(s,t))}else{if(!xe[g])return o?t:{};s=function(t,e,r){var n,i,o,a=t.constructor;switch(e){case at:return Ji(t);case q:case U:return new a(+t);case st:return function(t,e){var r=e?Ji(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case ut:case ct:case lt:case ft:case ht:case dt:case pt:case gt:case vt:return Yi(t,r);case Z:return new a;case K:case et:return new a(t);case X:return(o=new(i=t).constructor(i.source,Dt.exec(i))).lastIndex=i.lastIndex,o;case tt:return new a;case rt:return n=t,fn?ee(fn.call(n)):{}}}(t,g,u)}}a||(a=new kn);var _=a.get(t);if(_)return _;a.set(t,s),Cs(t)?t.forEach(function(r){s.add(Pn(r,e,n,r,t,a))}):Os(t)&&t.forEach(function(r,i){s.set(i,Pn(r,e,n,i,t,a))});var m=p?r:(d?h?Io:Eo:h?ou:iu)(t);return $e(m||t,function(r,i){m&&(r=t[i=r]),Fn(s,i,Pn(r,e,n,i,t,a))}),s}function Rn(t,e,n){var i=n.length;if(null==t)return!i;for(t=ee(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function Ln(t,e,n){if("function"!=typeof t)throw new ie(o);return ia(function(){t.apply(r,n)},e)}function zn(t,e,r,i){var o=-1,a=Ke,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;r&&(e=Je(e,pr(r))),i?(a=Qe,s=!1):e.length>=n&&(a=vr,s=!1,e=new wn(e));t:for(;++o<u;){var f=t[o],h=null==r?f:r(f);if(f=i||0!==f?f:0,s&&h==h){for(var d=l;d--;)if(e[d]===h)continue t;c.push(f)}else a(e,h,i)||c.push(f)}return c}dn.templateSettings={escape:Mt,evaluate:xt,interpolate:Tt,variable:"",imports:{_:dn}},dn.prototype=gn.prototype,dn.prototype.constructor=dn,vn.prototype=pn(gn.prototype),vn.prototype.constructor=vn,_n.prototype=pn(gn.prototype),_n.prototype.constructor=_n,mn.prototype.clear=function(){this.__data__=en?en(null):{},this.size=0},mn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mn.prototype.get=function(t){var e=this.__data__;if(en){var n=e[t];return n===a?r:n}return le.call(e,t)?e[t]:r},mn.prototype.has=function(t){var e=this.__data__;return en?e[t]!==r:le.call(e,t)},mn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=en&&e===r?a:e,this},yn.prototype.clear=function(){this.__data__=[],this.size=0},yn.prototype.delete=function(t){var e=this.__data__,r=On(e,t);return!(r<0||(r==e.length-1?e.pop():Re.call(e,r,1),--this.size,0))},yn.prototype.get=function(t){var e=this.__data__,n=On(e,t);return n<0?r:e[n][1]},yn.prototype.has=function(t){return On(this.__data__,t)>-1},yn.prototype.set=function(t,e){var r=this.__data__,n=On(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},bn.prototype.clear=function(){this.size=0,this.__data__={hash:new mn,map:new(Jr||yn),string:new mn}},bn.prototype.delete=function(t){var e=Lo(this,t).delete(t);return this.size-=e?1:0,e},bn.prototype.get=function(t){return Lo(this,t).get(t)},bn.prototype.has=function(t){return Lo(this,t).has(t)},bn.prototype.set=function(t,e){var r=Lo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},wn.prototype.add=wn.prototype.push=function(t){return this.__data__.set(t,a),this},wn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.clear=function(){this.__data__=new yn,this.size=0},kn.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},kn.prototype.get=function(t){return this.__data__.get(t)},kn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.set=function(t,e){var r=this.__data__;if(r instanceof yn){var i=r.__data__;if(!Jr||i.length<n-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new bn(i)}return r.set(t,e),this.size=r.size,this};var Nn=ao(Hn),Wn=ao(Zn,!0);function Dn(t,e){var r=!0;return Nn(t,function(t,n,i){return r=!!e(t,n,i)}),r}function qn(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(u===r?s==s&&!Ps(s):n(s,u)))var u=s,c=a}return c}function Un(t,e){var r=[];return Nn(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function Vn(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=$o),i||(i=[]);++o<a;){var s=t[o];e>0&&r(s)?e>1?Vn(s,e-1,r,n,i):Ye(i,s):n||(i[i.length]=s)}return i}var $n=so(),Gn=so(!0);function Hn(t,e){return t&&$n(t,e,iu)}function Zn(t,e){return t&&Gn(t,e,iu)}function Kn(t,e){return Ze(e,function(e){return Ms(t[e])})}function Qn(t,e){for(var n=0,i=(e=Gi(e,t)).length;null!=t&&n<i;)t=t[la(e[n++])];return n&&n==i?t:r}function Jn(t,e,r){var n=e(t);return _s(t)?n:Ye(n,r(t))}function Yn(t){return null==t?t===r?nt:Q:Ir&&Ir in ee(t)?function(t){var e=le.call(t,Ir),n=t[Ir];try{t[Ir]=r;var i=!0}catch(t){}var o=de.call(t);return i&&(e?t[Ir]=n:delete t[Ir]),o}(t):function(t){return de.call(t)}(t)}function Xn(t,e){return t>e}function ti(t,e){return null!=t&&le.call(t,e)}function ei(t,e){return null!=t&&e in ee(t)}function ri(t,e,n){for(var i=n?Qe:Ke,o=t[0].length,a=t.length,s=a,u=Qt(a),c=1/0,l=[];s--;){var f=t[s];s&&e&&(f=Je(f,pr(e))),c=$r(f.length,c),u[s]=!n&&(e||o>=120&&f.length>=120)?new wn(s&&f):r}f=t[0];var h=-1,d=u[0];t:for(;++h<o&&l.length<c;){var p=f[h],g=e?e(p):p;if(p=n||0!==p?p:0,!(d?vr(d,g):i(l,g,n))){for(s=a;--s;){var v=u[s];if(!(v?vr(v,g):i(t[s],g,n)))continue t}d&&d.push(g),l.push(p)}}return l}function ni(t,e,n){var i=null==(t=ea(t,e=Gi(e,t)))?t:t[la(Sa(e))];return null==i?r:Ue(i,t,n)}function ii(t){return Fs(t)&&Yn(t)==N}function oi(t,e,n,i,o){return t===e||(null==t||null==e||!Fs(t)&&!Fs(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=_s(t),u=_s(e),c=s?W:qo(t),l=u?W:qo(e),f=(c=c==N?J:c)==J,p=(l=l==N?J:l)==J,g=c==l;if(g&&ws(t)){if(!ws(e))return!1;s=!0,f=!1}if(g&&!f)return a||(a=new kn),s||Rs(t)?Oo(t,e,n,i,o,a):function(t,e,r,n,i,o,a){switch(r){case st:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case at:return!(t.byteLength!=e.byteLength||!o(new Oe(t),new Oe(e)));case q:case U:case K:return ds(+t,+e);case $:return t.name==e.name&&t.message==e.message;case X:case et:return t==e+"";case Z:var s=Sr;case tt:var u=n&h;if(s||(s=Tr),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=d,a.set(t,e);var l=Oo(s(t),s(e),n,i,o,a);return a.delete(t),l;case rt:if(fn)return fn.call(t)==fn.call(e)}return!1}(t,e,c,n,i,o,a);if(!(n&h)){var v=f&&le.call(t,"__wrapped__"),_=p&&le.call(e,"__wrapped__");if(v||_){var m=v?t.value():t,y=_?e.value():e;return a||(a=new kn),o(m,y,n,i,a)}}return!!g&&(a||(a=new kn),function(t,e,n,i,o,a){var s=n&h,u=Eo(t),c=u.length,l=Eo(e).length;if(c!=l&&!s)return!1;for(var f=c;f--;){var d=u[f];if(!(s?d in e:le.call(e,d)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var g=!0;a.set(t,e),a.set(e,t);for(var v=s;++f<c;){d=u[f];var _=t[d],m=e[d];if(i)var y=s?i(m,_,d,e,t,a):i(_,m,d,t,e,a);if(!(y===r?_===m||o(_,m,n,i,a):y)){g=!1;break}v||(v="constructor"==d)}if(g&&!v){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,i,o,a))}(t,e,n,i,oi,o))}function ai(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=ee(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===r&&!(c in t))return!1}else{var p=new kn;if(i)var g=i(l,f,c,t,e,p);if(!(g===r?oi(f,l,h|d,i,p):g))return!1}}return!0}function si(t){return!(!js(t)||(e=t,he&&he in e))&&(Ms(t)?me:Vt).test(fa(t));var e}function ui(t){return"function"==typeof t?t:null==t?Au:"object"==typeof t?_s(t)?pi(t[0],t[1]):di(t):Nu(t)}function ci(t){if(!Jo(t))return Ur(t);var e=[];for(var r in ee(t))le.call(t,r)&&"constructor"!=r&&e.push(r);return e}function li(t){if(!js(t))return function(t){var e=[];if(null!=t)for(var r in ee(t))e.push(r);return e}(t);var e=Jo(t),r=[];for(var n in t)("constructor"!=n||!e&&le.call(t,n))&&r.push(n);return r}function fi(t,e){return t<e}function hi(t,e){var r=-1,n=ys(t)?Qt(t.length):[];return Nn(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function di(t){var e=zo(t);return 1==e.length&&e[0][2]?Xo(e[0][0],e[0][1]):function(r){return r===t||ai(r,t,e)}}function pi(t,e){return Zo(t)&&Yo(e)?Xo(la(t),e):function(n){var i=Xs(n,t);return i===r&&i===e?tu(n,t):oi(e,i,h|d)}}function gi(t,e,n,i,o){t!==e&&$n(e,function(a,s){if(o||(o=new kn),js(a))!function(t,e,n,i,o,a,s){var u=ra(t,n),c=ra(e,n),l=s.get(c);if(l)jn(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):r,h=f===r;if(h){var d=_s(c),p=!d&&ws(c),g=!d&&!p&&Rs(c);f=c,d||p||g?_s(u)?f=u:bs(u)?f=ro(u):p?(h=!1,f=Qi(c,!0)):g?(h=!1,f=Yi(c,!0)):f=[]:Es(c)||vs(c)?(f=u,vs(u)?f=Vs(u):js(u)&&!Ms(u)||(f=Vo(c))):h=!1}h&&(s.set(c,f),o(f,c,i,a,s),s.delete(c)),jn(t,n,f)}}(t,e,s,n,gi,i,o);else{var u=i?i(ra(t,s),a,s+"",t,e,o):r;u===r&&(u=a),jn(t,s,u)}},ou)}function vi(t,e){var n=t.length;if(n)return Go(e+=e<0?n:0,n)?t[e]:r}function _i(t,e,r){var n=-1;return e=Je(e.length?e:[Au],pr(Ro())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(hi(t,function(t,r,i){return{criteria:Je(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return function(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,s=r.length;++n<a;){var u=Xi(i[n],o[n]);if(u){if(n>=s)return u;var c=r[n];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,r)})}function mi(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var a=e[n],s=Qn(t,a);r(s,a)&&Ti(o,Gi(a,t),s)}return o}function yi(t,e,r,n){var i=n?ar:or,o=-1,a=e.length,s=t;for(t===e&&(e=ro(e)),r&&(s=Je(t,pr(r)));++o<a;)for(var u=0,c=e[o],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==t&&Re.call(s,u,1),Re.call(t,u,1);return t}function bi(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==o){var o=i;Go(i)?Re.call(t,i,1):zi(t,i)}}return t}function wi(t,e){return t+zr(Zr()*(e-t+1))}function ki(t,e){var r="";if(!t||e<1||e>E)return r;do{e%2&&(r+=t),(e=zr(e/2))&&(t+=t)}while(e);return r}function Si(t,e){return oa(ta(t,e,Au),t+"")}function Mi(t){return Mn(du(t))}function xi(t,e){var r=du(t);return ua(r,Bn(e,0,r.length))}function Ti(t,e,n,i){if(!js(t))return t;for(var o=-1,a=(e=Gi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var c=la(e[o]),l=n;if(o!=s){var f=u[c];(l=i?i(f,c,u):r)===r&&(l=js(f)?f:Go(e[o+1])?[]:{})}Fn(u,c,l),u=u[c]}return t}var ji=rn?function(t,e){return rn.set(t,e),t}:Au,Fi=Cr?function(t,e){return Cr(t,"toString",{configurable:!0,enumerable:!1,value:ju(e),writable:!0})}:Au;function Oi(t){return ua(du(t))}function Ai(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Qt(i);++n<i;)o[n]=t[n+e];return o}function Ei(t,e){var r;return Nn(t,function(t,n,i){return!(r=e(t,n,i))}),!!r}function Ii(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=L){for(;n<i;){var o=n+i>>>1,a=t[o];null!==a&&!Ps(a)&&(r?a<=e:a<e)?n=o+1:i=o}return i}return Ci(t,e,Au,r)}function Ci(t,e,n,i){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,u=null===e,c=Ps(e),l=e===r;o<a;){var f=zr((o+a)/2),h=n(t[f]),d=h!==r,p=null===h,g=h==h,v=Ps(h);if(s)var _=i||g;else _=l?g&&(i||d):u?g&&d&&(i||!p):c?g&&d&&!p&&(i||!v):!p&&!v&&(i?h<=e:h<e);_?o=f+1:a=f}return $r(a,P)}function Bi(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var a=t[r],s=e?e(a):a;if(!r||!ds(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Pi(t){return"number"==typeof t?t:Ps(t)?C:+t}function Ri(t){if("string"==typeof t)return t;if(_s(t))return Je(t,Ri)+"";if(Ps(t))return hn?hn.call(t):"";var e=t+"";return"0"==e&&1/t==-A?"-0":e}function Li(t,e,r){var i=-1,o=Ke,a=t.length,s=!0,u=[],c=u;if(r)s=!1,o=Qe;else if(a>=n){var l=e?null:So(t);if(l)return Tr(l);s=!1,o=vr,c=new wn}else c=e?[]:u;t:for(;++i<a;){var f=t[i],h=e?e(f):f;if(f=r||0!==f?f:0,s&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),u.push(f)}else o(c,h,r)||(c!==u&&c.push(h),u.push(f))}return u}function zi(t,e){return null==(t=ea(t,e=Gi(e,t)))||delete t[la(Sa(e))]}function Ni(t,e,r,n){return Ti(t,e,r(Qn(t,e)),n)}function Wi(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?Ai(t,n?0:o,n?o+1:i):Ai(t,n?o+1:0,n?i:o)}function Di(t,e){var r=t;return r instanceof _n&&(r=r.value()),Xe(e,function(t,e){return e.func.apply(e.thisArg,Ye([t],e.args))},r)}function qi(t,e,r){var n=t.length;if(n<2)return n?Li(t[0]):[];for(var i=-1,o=Qt(n);++i<n;)for(var a=t[i],s=-1;++s<n;)s!=i&&(o[i]=zn(o[i]||a,t[s],e,r));return Li(Vn(o,1),e,r)}function Ui(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var u=i<a?e[i]:r;n(s,t[i],u)}return s}function Vi(t){return bs(t)?t:[]}function $i(t){return"function"==typeof t?t:Au}function Gi(t,e){return _s(t)?t:Zo(t,e)?[t]:ca($s(t))}var Hi=Si;function Zi(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Ai(t,e,n)}var Ki=Br||function(t){return Ee.clearTimeout(t)};function Qi(t,e){if(e)return t.slice();var r=t.length,n=Ae?Ae(r):new t.constructor(r);return t.copy(n),n}function Ji(t){var e=new t.constructor(t.byteLength);return new Oe(e).set(new Oe(t)),e}function Yi(t,e){var r=e?Ji(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Xi(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Ps(t),s=e!==r,u=null===e,c=e==e,l=Ps(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function to(t,e,r,n){for(var i=-1,o=t.length,a=r.length,s=-1,u=e.length,c=Vr(o-a,0),l=Qt(u+c),f=!n;++s<u;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[r[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function eo(t,e,r,n){for(var i=-1,o=t.length,a=-1,s=r.length,u=-1,c=e.length,l=Vr(o-s,0),f=Qt(l+c),h=!n;++i<l;)f[i]=t[i];for(var d=i;++u<c;)f[d+u]=e[u];for(;++a<s;)(h||i<o)&&(f[d+r[a]]=t[i++]);return f}function ro(t,e){var r=-1,n=t.length;for(e||(e=Qt(n));++r<n;)e[r]=t[r];return e}function no(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=i?i(n[u],t[u],u,n,t):r;c===r&&(c=t[u]),o?In(n,u,c):Fn(n,u,c)}return n}function io(t,e){return function(r,n){var i=_s(r)?Ve:An,o=e?e():{};return i(r,t,Ro(n,2),o)}}function oo(t){return Si(function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&Ho(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=ee(e);++i<o;){var u=n[i];u&&t(e,u,i,a)}return e})}function ao(t,e){return function(r,n){if(null==r)return r;if(!ys(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=ee(r);(e?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function so(t){return function(e,r,n){for(var i=-1,o=ee(e),a=n(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===r(o[u],u,o))break}return e}}function uo(t){return function(e){var n=kr(e=$s(e))?Or(e):r,i=n?n[0]:e.charAt(0),o=n?Zi(n,1).join(""):e.slice(1);return i[t]()+o}}function co(t){return function(e){return Xe(Mu(vu(e).replace(ve,"")),t,"")}}function lo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=pn(t.prototype),n=t.apply(r,e);return js(n)?n:r}}function fo(t){return function(e,n,i){var o=ee(e);if(!ys(e)){var a=Ro(n,3);e=iu(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function ho(t){return Ao(function(e){var n=e.length,i=n,a=vn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new ie(o);if(a&&!u&&"wrapper"==Bo(s))var u=new vn([],!0)}for(i=u?i:n;++i<n;){var c=Bo(s=e[i]),l="wrapper"==c?Co(s):r;u=l&&Ko(l[0])&&l[1]==(w|_|y|k)&&!l[4].length&&1==l[9]?u[Bo(l[0])].apply(u,l[3]):1==s.length&&Ko(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&_s(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function po(t,e,n,i,o,a,s,u,c,l){var f=e&w,h=e&p,d=e&g,v=e&(_|m),y=e&S,b=d?r:lo(t);return function p(){for(var g=arguments.length,_=Qt(g),m=g;m--;)_[m]=arguments[m];if(v)var w=Po(p),k=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}(_,w);if(i&&(_=to(_,i,o,v)),a&&(_=eo(_,a,s,v)),g-=k,v&&g<l){var S=xr(_,w);return wo(t,e,po,p.placeholder,n,_,S,u,c,l-g)}var M=h?n:this,x=d?M[t]:t;return g=_.length,u?_=function(t,e){for(var n=t.length,i=$r(e.length,n),o=ro(t);i--;){var a=e[i];t[i]=Go(a,n)?o[a]:r}return t}(_,u):y&&g>1&&_.reverse(),f&&c<g&&(_.length=c),this&&this!==Ee&&this instanceof p&&(x=b||lo(x)),x.apply(M,_)}}function go(t,e){return function(r,n){return function(t,e,r,n){return Hn(t,function(t,i,o){e(n,r(t),i,o)}),n}(r,t,e(n),{})}}function vo(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Ri(n),i=Ri(i)):(n=Pi(n),i=Pi(i)),o=t(n,i)}return o}}function _o(t){return Ao(function(e){return e=Je(e,pr(Ro())),Si(function(r){var n=this;return t(e,function(t){return Ue(t,n,r)})})})}function mo(t,e){var n=(e=e===r?" ":Ri(e)).length;if(n<2)return n?ki(e,t):e;var i=ki(e,Lr(t/Fr(e)));return kr(e)?Zi(Or(i),0,t).join(""):i.slice(0,t)}function yo(t){return function(e,n,i){return i&&"number"!=typeof i&&Ho(e,n,i)&&(n=i=r),e=Ws(e),n===r?(n=e,e=0):n=Ws(n),function(t,e,r,n){for(var i=-1,o=Vr(Lr((e-t)/(r||1)),0),a=Qt(o);o--;)a[n?o:++i]=t,t+=r;return a}(e,n,i=i===r?e<n?1:-1:Ws(i),t)}}function bo(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Us(e),r=Us(r)),t(e,r)}}function wo(t,e,n,i,o,a,s,u,c,l){var f=e&_;e|=f?y:b,(e&=~(f?b:y))&v||(e&=~(p|g));var h=[t,e,o,f?a:r,f?s:r,f?r:a,f?r:s,u,c,l],d=n.apply(r,h);return Ko(t)&&na(d,h),d.placeholder=i,aa(d,t,e)}function ko(t){var e=te[t];return function(t,r){if(t=Us(t),(r=null==r?0:$r(Ds(r),292))&&Dr(t)){var n=($s(t)+"e").split("e");return+((n=($s(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var So=Xr&&1/Tr(new Xr([,-0]))[1]==A?function(t){return new Xr(t)}:Pu;function Mo(t){return function(e){var r=qo(e);return r==Z?Sr(e):r==tt?jr(e):function(t,e){return Je(e,function(e){return[e,t[e]]})}(e,t(e))}}function xo(t,e,n,i,a,s,c,l){var f=e&g;if(!f&&"function"!=typeof t)throw new ie(o);var h=i?i.length:0;if(h||(e&=~(y|b),i=a=r),c=c===r?c:Vr(Ds(c),0),l=l===r?l:Ds(l),h-=a?a.length:0,e&b){var d=i,S=a;i=a=r}var M=f?r:Co(t),x=[t,e,n,i,a,d,S,s,c,l];if(M&&function(t,e){var r=t[1],n=e[1],i=r|n,o=i<(p|g|w),a=n==w&&r==_||n==w&&r==k&&t[7].length<=e[8]||n==(w|k)&&e[7].length<=e[8]&&r==_;if(!o&&!a)return t;n&p&&(t[2]=e[2],i|=r&p?0:v);var s=e[3];if(s){var c=t[3];t[3]=c?to(c,s,e[4]):s,t[4]=c?xr(t[3],u):e[4]}(s=e[5])&&(c=t[5],t[5]=c?eo(c,s,e[6]):s,t[6]=c?xr(t[5],u):e[6]),(s=e[7])&&(t[7]=s),n&w&&(t[8]=null==t[8]?e[8]:$r(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(x,M),t=x[0],e=x[1],n=x[2],i=x[3],a=x[4],!(l=x[9]=x[9]===r?f?0:t.length:Vr(x[9]-h,0))&&e&(_|m)&&(e&=~(_|m)),e&&e!=p)T=e==_||e==m?function(t,e,n){var i=lo(t);return function o(){for(var a=arguments.length,s=Qt(a),u=a,c=Po(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:xr(s,c);return(a-=l.length)<n?wo(t,e,po,o.placeholder,r,s,l,r,r,n-a):Ue(this&&this!==Ee&&this instanceof o?i:t,this,s)}}(t,e,l):e!=y&&e!=(p|y)||a.length?po.apply(r,x):function(t,e,r,n){var i=e&p,o=lo(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=n.length,l=Qt(c+s),f=this&&this!==Ee&&this instanceof e?o:t;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++a];return Ue(f,i?r:this,l)}}(t,e,n,i);else var T=function(t,e,r){var n=e&p,i=lo(t);return function e(){return(this&&this!==Ee&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,n);return aa((M?ji:na)(T,x),t,e)}function To(t,e,n,i){return t===r||ds(t,se[n])&&!le.call(i,n)?e:t}function jo(t,e,n,i,o,a){return js(t)&&js(e)&&(a.set(e,t),gi(t,e,r,jo,a),a.delete(e)),t}function Fo(t){return Es(t)?r:t}function Oo(t,e,n,i,o,a){var s=n&h,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,p=!0,g=n&d?new wn:r;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],_=e[f];if(i)var m=s?i(_,v,f,e,t,a):i(v,_,f,t,e,a);if(m!==r){if(m)continue;p=!1;break}if(g){if(!er(e,function(t,e){if(!vr(g,e)&&(v===t||o(v,t,n,i,a)))return g.push(e)})){p=!1;break}}else if(v!==_&&!o(v,_,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Ao(t){return oa(ta(t,r,ma),t+"")}function Eo(t){return Jn(t,iu,Wo)}function Io(t){return Jn(t,ou,Do)}var Co=rn?function(t){return rn.get(t)}:Pu;function Bo(t){for(var e=t.name+"",r=nn[e],n=le.call(nn,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function Po(t){return(le.call(dn,"placeholder")?dn:t).placeholder}function Ro(){var t=dn.iteratee||Eu;return t=t===Eu?ui:t,arguments.length?t(arguments[0],arguments[1]):t}function Lo(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function zo(t){for(var e=iu(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Yo(i)]}return e}function No(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return si(n)?n:r}var Wo=Nr?function(t){return null==t?[]:(t=ee(t),Ze(Nr(t),function(e){return Pe.call(t,e)}))}:qu,Do=Nr?function(t){for(var e=[];t;)Ye(e,Wo(t)),t=Ie(t);return e}:qu,qo=Yn;function Uo(t,e,r){for(var n=-1,i=(e=Gi(e,t)).length,o=!1;++n<i;){var a=la(e[n]);if(!(o=null!=t&&r(t,a)))break;t=t[a]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&Ts(i)&&Go(a,i)&&(_s(t)||vs(t))}function Vo(t){return"function"!=typeof t.constructor||Jo(t)?{}:pn(Ie(t))}function $o(t){return _s(t)||vs(t)||!!(rr&&t&&t[rr])}function Go(t,e){var r=typeof t;return!!(e=null==e?E:e)&&("number"==r||"symbol"!=r&&Gt.test(t))&&t>-1&&t%1==0&&t<e}function Ho(t,e,r){if(!js(r))return!1;var n=typeof e;return!!("number"==n?ys(r)&&Go(e,r.length):"string"==n&&e in r)&&ds(r[e],t)}function Zo(t,e){if(_s(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ps(t))||Ft.test(t)||!jt.test(t)||null!=e&&t in ee(e)}function Ko(t){var e=Bo(t),r=dn[e];if("function"!=typeof r||!(e in _n.prototype))return!1;if(t===r)return!0;var n=Co(r);return!!n&&t===n[0]}(Qr&&qo(new Qr(new ArrayBuffer(1)))!=st||Jr&&qo(new Jr)!=Z||Yr&&"[object Promise]"!=qo(Yr.resolve())||Xr&&qo(new Xr)!=tt||tn&&qo(new tn)!=it)&&(qo=function(t){var e=Yn(t),n=e==J?t.constructor:r,i=n?fa(n):"";if(i)switch(i){case on:return st;case an:return Z;case sn:return"[object Promise]";case un:return tt;case cn:return it}return e});var Qo=ue?Ms:Uu;function Jo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Yo(t){return t==t&&!js(t)}function Xo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in ee(n))}}function ta(t,e,n){return e=Vr(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Vr(r.length-e,0),a=Qt(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Qt(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Ue(t,this,s)}}function ea(t,e){return e.length<2?t:Qn(t,Ai(e,0,-1))}function ra(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var na=sa(ji),ia=Rr||function(t,e){return Ee.setTimeout(t,e)},oa=sa(Fi);function aa(t,e,r){var n=e+"";return oa(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Pt,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return $e(z,function(r){var n="_."+r[0];e&r[1]&&!Ke(t,n)&&t.push(n)}),t.sort()}(function(t){var e=t.match(Rt);return e?e[1].split(Lt):[]}(n),r)))}function sa(t){var e=0,n=0;return function(){var i=Gr(),o=j-(i-n);if(n=i,o>0){if(++e>=T)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ua(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=wi(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ca=function(t){var e=ss(t,function(t){return r.size===s&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ot,function(t,r,n,i){e.push(n?i.replace(Nt,"$1"):r||t)}),e});function la(t){if("string"==typeof t||Ps(t))return t;var e=t+"";return"0"==e&&1/t==-A?"-0":e}function fa(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ha(t){if(t instanceof _n)return t.clone();var e=new vn(t.__wrapped__,t.__chain__);return e.__actions__=ro(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var da=Si(function(t,e){return bs(t)?zn(t,Vn(e,1,bs,!0)):[]}),pa=Si(function(t,e){var n=Sa(e);return bs(n)&&(n=r),bs(t)?zn(t,Vn(e,1,bs,!0),Ro(n,2)):[]}),ga=Si(function(t,e){var n=Sa(e);return bs(n)&&(n=r),bs(t)?zn(t,Vn(e,1,bs,!0),r,n):[]});function va(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Ds(r);return i<0&&(i=Vr(n+i,0)),ir(t,Ro(e,3),i)}function _a(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Ds(n),o=n<0?Vr(i+o,0):$r(o,i-1)),ir(t,Ro(e,3),o,!0)}function ma(t){return null!=t&&t.length?Vn(t,1):[]}function ya(t){return t&&t.length?t[0]:r}var ba=Si(function(t){var e=Je(t,Vi);return e.length&&e[0]===t[0]?ri(e):[]}),wa=Si(function(t){var e=Sa(t),n=Je(t,Vi);return e===Sa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?ri(n,Ro(e,2)):[]}),ka=Si(function(t){var e=Sa(t),n=Je(t,Vi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?ri(n,r,e):[]});function Sa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Ma=Si(xa);function xa(t,e){return t&&t.length&&e&&e.length?yi(t,e):t}var Ta=Ao(function(t,e){var r=null==t?0:t.length,n=Cn(t,e);return bi(t,Je(e,function(t){return Go(t,r)?+t:t}).sort(Xi)),n});function ja(t){return null==t?t:Kr.call(t)}var Fa=Si(function(t){return Li(Vn(t,1,bs,!0))}),Oa=Si(function(t){var e=Sa(t);return bs(e)&&(e=r),Li(Vn(t,1,bs,!0),Ro(e,2))}),Aa=Si(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Li(Vn(t,1,bs,!0),r,e)});function Ea(t){if(!t||!t.length)return[];var e=0;return t=Ze(t,function(t){if(bs(t))return e=Vr(t.length,e),!0}),dr(e,function(e){return Je(t,cr(e))})}function Ia(t,e){if(!t||!t.length)return[];var n=Ea(t);return null==e?n:Je(n,function(t){return Ue(e,r,t)})}var Ca=Si(function(t,e){return bs(t)?zn(t,e):[]}),Ba=Si(function(t){return qi(Ze(t,bs))}),Pa=Si(function(t){var e=Sa(t);return bs(e)&&(e=r),qi(Ze(t,bs),Ro(e,2))}),Ra=Si(function(t){var e=Sa(t);return e="function"==typeof e?e:r,qi(Ze(t,bs),r,e)}),La=Si(Ea);var za=Si(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,Ia(t,n)});function Na(t){var e=dn(t);return e.__chain__=!0,e}function Wa(t,e){return e(t)}var Da=Ao(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Cn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof _n&&Go(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Wa,args:[o],thisArg:r}),new vn(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)});var qa=io(function(t,e,r){le.call(t,r)?++t[r]:In(t,r,1)});var Ua=fo(va),Va=fo(_a);function $a(t,e){return(_s(t)?$e:Nn)(t,Ro(e,3))}function Ga(t,e){return(_s(t)?Ge:Wn)(t,Ro(e,3))}var Ha=io(function(t,e,r){le.call(t,r)?t[r].push(e):In(t,r,[e])});var Za=Si(function(t,e,r){var n=-1,i="function"==typeof e,o=ys(t)?Qt(t.length):[];return Nn(t,function(t){o[++n]=i?Ue(e,t,r):ni(t,e,r)}),o}),Ka=io(function(t,e,r){In(t,r,e)});function Qa(t,e){return(_s(t)?Je:hi)(t,Ro(e,3))}var Ja=io(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});var Ya=Si(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Ho(t,e[0],e[1])?e=[]:r>2&&Ho(e[0],e[1],e[2])&&(e=[e[0]]),_i(t,Vn(e,1),[])}),Xa=Pr||function(){return Ee.Date.now()};function ts(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,xo(t,w,r,r,r,r,e)}function es(t,e){var n;if("function"!=typeof e)throw new ie(o);return t=Ds(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var rs=Si(function(t,e,r){var n=p;if(r.length){var i=xr(r,Po(rs));n|=y}return xo(t,n,e,r,i)}),ns=Si(function(t,e,r){var n=p|g;if(r.length){var i=xr(r,Po(ns));n|=y}return xo(e,n,t,r,i)});function is(t,e,n){var i,a,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new ie(o);function g(e){var n=i,o=a;return i=a=r,f=e,u=t.apply(o,n)}function v(t){var n=t-l;return l===r||n>=e||n<0||d&&t-f>=s}function _(){var t=Xa();if(v(t))return m(t);c=ia(_,function(t){var r=e-(t-l);return d?$r(r,s-(t-f)):r}(t))}function m(t){return c=r,p&&i?g(t):(i=a=r,u)}function y(){var t=Xa(),n=v(t);if(i=arguments,a=this,l=t,n){if(c===r)return function(t){return f=t,c=ia(_,e),h?g(t):u}(l);if(d)return Ki(c),c=ia(_,e),g(l)}return c===r&&(c=ia(_,e)),u}return e=Us(e)||0,js(n)&&(h=!!n.leading,s=(d="maxWait"in n)?Vr(Us(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==r&&Ki(c),f=0,i=l=a=c=r},y.flush=function(){return c===r?u:m(Xa())},y}var os=Si(function(t,e){return Ln(t,1,e)}),as=Si(function(t,e,r){return Ln(t,Us(e)||0,r)});function ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(o);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(ss.Cache||bn),r}function us(t){if("function"!=typeof t)throw new ie(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ss.Cache=bn;var cs=Hi(function(t,e){var r=(e=1==e.length&&_s(e[0])?Je(e[0],pr(Ro())):Je(Vn(e,1),pr(Ro()))).length;return Si(function(n){for(var i=-1,o=$r(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return Ue(t,this,n)})}),ls=Si(function(t,e){var n=xr(e,Po(ls));return xo(t,y,r,e,n)}),fs=Si(function(t,e){var n=xr(e,Po(fs));return xo(t,b,r,e,n)}),hs=Ao(function(t,e){return xo(t,k,r,r,r,e)});function ds(t,e){return t===e||t!=t&&e!=e}var ps=bo(Xn),gs=bo(function(t,e){return t>=e}),vs=ii(function(){return arguments}())?ii:function(t){return Fs(t)&&le.call(t,"callee")&&!Pe.call(t,"callee")},_s=Qt.isArray,ms=Le?pr(Le):function(t){return Fs(t)&&Yn(t)==at};function ys(t){return null!=t&&Ts(t.length)&&!Ms(t)}function bs(t){return Fs(t)&&ys(t)}var ws=Wr||Uu,ks=ze?pr(ze):function(t){return Fs(t)&&Yn(t)==U};function Ss(t){if(!Fs(t))return!1;var e=Yn(t);return e==$||e==V||"string"==typeof t.message&&"string"==typeof t.name&&!Es(t)}function Ms(t){if(!js(t))return!1;var e=Yn(t);return e==G||e==H||e==D||e==Y}function xs(t){return"number"==typeof t&&t==Ds(t)}function Ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}function js(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Fs(t){return null!=t&&"object"==typeof t}var Os=Ne?pr(Ne):function(t){return Fs(t)&&qo(t)==Z};function As(t){return"number"==typeof t||Fs(t)&&Yn(t)==K}function Es(t){if(!Fs(t)||Yn(t)!=J)return!1;var e=Ie(t);if(null===e)return!0;var r=le.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ce.call(r)==pe}var Is=We?pr(We):function(t){return Fs(t)&&Yn(t)==X};var Cs=De?pr(De):function(t){return Fs(t)&&qo(t)==tt};function Bs(t){return"string"==typeof t||!_s(t)&&Fs(t)&&Yn(t)==et}function Ps(t){return"symbol"==typeof t||Fs(t)&&Yn(t)==rt}var Rs=qe?pr(qe):function(t){return Fs(t)&&Ts(t.length)&&!!Me[Yn(t)]};var Ls=bo(fi),zs=bo(function(t,e){return t<=e});function Ns(t){if(!t)return[];if(ys(t))return Bs(t)?Or(t):ro(t);if(lr&&t[lr])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[lr]());var e=qo(t);return(e==Z?Sr:e==tt?Tr:du)(t)}function Ws(t){return t?(t=Us(t))===A||t===-A?(t<0?-1:1)*I:t==t?t:0:0===t?t:0}function Ds(t){var e=Ws(t),r=e%1;return e==e?r?e-r:e:0}function qs(t){return t?Bn(Ds(t),0,B):0}function Us(t){if("number"==typeof t)return t;if(Ps(t))return C;if(js(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=js(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(It,"");var r=Ut.test(t);return r||$t.test(t)?Fe(t.slice(2),r?2:8):qt.test(t)?C:+t}function Vs(t){return no(t,ou(t))}function $s(t){return null==t?"":Ri(t)}var Gs=oo(function(t,e){if(Jo(e)||ys(e))no(e,iu(e),t);else for(var r in e)le.call(e,r)&&Fn(t,r,e[r])}),Hs=oo(function(t,e){no(e,ou(e),t)}),Zs=oo(function(t,e,r,n){no(e,ou(e),t,n)}),Ks=oo(function(t,e,r,n){no(e,iu(e),t,n)}),Qs=Ao(Cn);var Js=Si(function(t,e){t=ee(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&Ho(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=ou(a),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===r||ds(f,se[l])&&!le.call(t,l))&&(t[l]=a[l])}return t}),Ys=Si(function(t){return t.push(r,jo),Ue(su,r,t)});function Xs(t,e,n){var i=null==t?r:Qn(t,e);return i===r?n:i}function tu(t,e){return null!=t&&Uo(t,e,ei)}var eu=go(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=r},ju(Au)),ru=go(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),le.call(t,e)?t[e].push(r):t[e]=[r]},Ro),nu=Si(ni);function iu(t){return ys(t)?Sn(t):ci(t)}function ou(t){return ys(t)?Sn(t,!0):li(t)}var au=oo(function(t,e,r){gi(t,e,r)}),su=oo(function(t,e,r,n){gi(t,e,r,n)}),uu=Ao(function(t,e){var r={};if(null==t)return r;var n=!1;e=Je(e,function(e){return e=Gi(e,t),n||(n=e.length>1),e}),no(t,Io(t),r),n&&(r=Pn(r,c|l|f,Fo));for(var i=e.length;i--;)zi(r,e[i]);return r});var cu=Ao(function(t,e){return null==t?{}:function(t,e){return mi(t,e,function(e,r){return tu(t,r)})}(t,e)});function lu(t,e){if(null==t)return{};var r=Je(Io(t),function(t){return[t]});return e=Ro(e),mi(t,r,function(t,r){return e(t,r[0])})}var fu=Mo(iu),hu=Mo(ou);function du(t){return null==t?[]:gr(t,iu(t))}var pu=co(function(t,e,r){return e=e.toLowerCase(),t+(r?gu(e):e)});function gu(t){return Su($s(t).toLowerCase())}function vu(t){return(t=$s(t))&&t.replace(Ht,yr).replace(_e,"")}var _u=co(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),mu=co(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),yu=uo("toLowerCase");var bu=co(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});var wu=co(function(t,e,r){return t+(r?" ":"")+Su(e)});var ku=co(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Su=uo("toUpperCase");function Mu(t,e,n){return t=$s(t),(e=n?r:e)===r?function(t){return we.test(t)}(t)?function(t){return t.match(ye)||[]}(t):function(t){return t.match(zt)||[]}(t):t.match(e)||[]}var xu=Si(function(t,e){try{return Ue(t,r,e)}catch(t){return Ss(t)?t:new Yt(t)}}),Tu=Ao(function(t,e){return $e(e,function(e){e=la(e),In(t,e,rs(t[e],t))}),t});function ju(t){return function(){return t}}var Fu=ho(),Ou=ho(!0);function Au(t){return t}function Eu(t){return ui("function"==typeof t?t:Pn(t,c))}var Iu=Si(function(t,e){return function(r){return ni(r,t,e)}}),Cu=Si(function(t,e){return function(r){return ni(t,r,e)}});function Bu(t,e,r){var n=iu(e),i=Kn(e,n);null!=r||js(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=Kn(e,iu(e)));var o=!(js(r)&&"chain"in r&&!r.chain),a=Ms(t);return $e(i,function(r){var n=e[r];t[r]=n,a&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=ro(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Ye([this.value()],arguments))})}),t}function Pu(){}var Ru=_o(Je),Lu=_o(He),zu=_o(er);function Nu(t){return Zo(t)?cr(la(t)):function(t){return function(e){return Qn(e,t)}}(t)}var Wu=yo(),Du=yo(!0);function qu(){return[]}function Uu(){return!1}var Vu=vo(function(t,e){return t+e},0),$u=ko("ceil"),Gu=vo(function(t,e){return t/e},1),Hu=ko("floor");var Zu,Ku=vo(function(t,e){return t*e},1),Qu=ko("round"),Ju=vo(function(t,e){return t-e},0);return dn.after=function(t,e){if("function"!=typeof e)throw new ie(o);return t=Ds(t),function(){if(--t<1)return e.apply(this,arguments)}},dn.ary=ts,dn.assign=Gs,dn.assignIn=Hs,dn.assignInWith=Zs,dn.assignWith=Ks,dn.at=Qs,dn.before=es,dn.bind=rs,dn.bindAll=Tu,dn.bindKey=ns,dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return _s(t)?t:[t]},dn.chain=Na,dn.chunk=function(t,e,n){e=(n?Ho(t,e,n):e===r)?1:Vr(Ds(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=Qt(Lr(i/e));o<i;)s[a++]=Ai(t,o,o+=e);return s},dn.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i},dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Qt(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Ye(_s(r)?ro(r):[r],Vn(e,1))},dn.cond=function(t){var e=null==t?0:t.length,r=Ro();return t=e?Je(t,function(t){if("function"!=typeof t[1])throw new ie(o);return[r(t[0]),t[1]]}):[],Si(function(r){for(var n=-1;++n<e;){var i=t[n];if(Ue(i[0],this,r))return Ue(i[1],this,r)}})},dn.conforms=function(t){return function(t){var e=iu(t);return function(r){return Rn(r,t,e)}}(Pn(t,c))},dn.constant=ju,dn.countBy=qa,dn.create=function(t,e){var r=pn(t);return null==e?r:En(r,e)},dn.curry=function t(e,n,i){var o=xo(e,_,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},dn.curryRight=function t(e,n,i){var o=xo(e,m,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},dn.debounce=is,dn.defaults=Js,dn.defaultsDeep=Ys,dn.defer=os,dn.delay=as,dn.difference=da,dn.differenceBy=pa,dn.differenceWith=ga,dn.drop=function(t,e,n){var i=null==t?0:t.length;return i?Ai(t,(e=n||e===r?1:Ds(e))<0?0:e,i):[]},dn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Ai(t,0,(e=i-(e=n||e===r?1:Ds(e)))<0?0:e):[]},dn.dropRightWhile=function(t,e){return t&&t.length?Wi(t,Ro(e,3),!0,!0):[]},dn.dropWhile=function(t,e){return t&&t.length?Wi(t,Ro(e,3),!0):[]},dn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Ho(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=Ds(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Ds(i))<0&&(i+=o),i=n>i?0:qs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},dn.filter=function(t,e){return(_s(t)?Ze:Un)(t,Ro(e,3))},dn.flatMap=function(t,e){return Vn(Qa(t,e),1)},dn.flatMapDeep=function(t,e){return Vn(Qa(t,e),A)},dn.flatMapDepth=function(t,e,n){return n=n===r?1:Ds(n),Vn(Qa(t,e),n)},dn.flatten=ma,dn.flattenDeep=function(t){return null!=t&&t.length?Vn(t,A):[]},dn.flattenDepth=function(t,e){return null!=t&&t.length?Vn(t,e=e===r?1:Ds(e)):[]},dn.flip=function(t){return xo(t,S)},dn.flow=Fu,dn.flowRight=Ou,dn.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},dn.functions=function(t){return null==t?[]:Kn(t,iu(t))},dn.functionsIn=function(t){return null==t?[]:Kn(t,ou(t))},dn.groupBy=Ha,dn.initial=function(t){return null!=t&&t.length?Ai(t,0,-1):[]},dn.intersection=ba,dn.intersectionBy=wa,dn.intersectionWith=ka,dn.invert=eu,dn.invertBy=ru,dn.invokeMap=Za,dn.iteratee=Eu,dn.keyBy=Ka,dn.keys=iu,dn.keysIn=ou,dn.map=Qa,dn.mapKeys=function(t,e){var r={};return e=Ro(e,3),Hn(t,function(t,n,i){In(r,e(t,n,i),t)}),r},dn.mapValues=function(t,e){var r={};return e=Ro(e,3),Hn(t,function(t,n,i){In(r,n,e(t,n,i))}),r},dn.matches=function(t){return di(Pn(t,c))},dn.matchesProperty=function(t,e){return pi(t,Pn(e,c))},dn.memoize=ss,dn.merge=au,dn.mergeWith=su,dn.method=Iu,dn.methodOf=Cu,dn.mixin=Bu,dn.negate=us,dn.nthArg=function(t){return t=Ds(t),Si(function(e){return vi(e,t)})},dn.omit=uu,dn.omitBy=function(t,e){return lu(t,us(Ro(e)))},dn.once=function(t){return es(2,t)},dn.orderBy=function(t,e,n,i){return null==t?[]:(_s(e)||(e=null==e?[]:[e]),_s(n=i?r:n)||(n=null==n?[]:[n]),_i(t,e,n))},dn.over=Ru,dn.overArgs=cs,dn.overEvery=Lu,dn.overSome=zu,dn.partial=ls,dn.partialRight=fs,dn.partition=Ja,dn.pick=cu,dn.pickBy=lu,dn.property=Nu,dn.propertyOf=function(t){return function(e){return null==t?r:Qn(t,e)}},dn.pull=Ma,dn.pullAll=xa,dn.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?yi(t,e,Ro(r,2)):t},dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?yi(t,e,r,n):t},dn.pullAt=Ta,dn.range=Wu,dn.rangeRight=Du,dn.rearg=hs,dn.reject=function(t,e){return(_s(t)?Ze:Un)(t,us(Ro(e,3)))},dn.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=Ro(e,3);++n<o;){var a=t[n];e(a,n,t)&&(r.push(a),i.push(n))}return bi(t,i),r},dn.rest=function(t,e){if("function"!=typeof t)throw new ie(o);return Si(t,e=e===r?e:Ds(e))},dn.reverse=ja,dn.sampleSize=function(t,e,n){return e=(n?Ho(t,e,n):e===r)?1:Ds(e),(_s(t)?xn:xi)(t,e)},dn.set=function(t,e,r){return null==t?t:Ti(t,e,r)},dn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ti(t,e,n,i)},dn.shuffle=function(t){return(_s(t)?Tn:Oi)(t)},dn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ho(t,e,n)?(e=0,n=i):(e=null==e?0:Ds(e),n=n===r?i:Ds(n)),Ai(t,e,n)):[]},dn.sortBy=Ya,dn.sortedUniq=function(t){return t&&t.length?Bi(t):[]},dn.sortedUniqBy=function(t,e){return t&&t.length?Bi(t,Ro(e,2)):[]},dn.split=function(t,e,n){return n&&"number"!=typeof n&&Ho(t,e,n)&&(e=n=r),(n=n===r?B:n>>>0)?(t=$s(t))&&("string"==typeof e||null!=e&&!Is(e))&&!(e=Ri(e))&&kr(t)?Zi(Or(t),0,n):t.split(e,n):[]},dn.spread=function(t,e){if("function"!=typeof t)throw new ie(o);return e=null==e?0:Vr(Ds(e),0),Si(function(r){var n=r[e],i=Zi(r,0,e);return n&&Ye(i,n),Ue(t,this,i)})},dn.tail=function(t){var e=null==t?0:t.length;return e?Ai(t,1,e):[]},dn.take=function(t,e,n){return t&&t.length?Ai(t,0,(e=n||e===r?1:Ds(e))<0?0:e):[]},dn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Ai(t,(e=i-(e=n||e===r?1:Ds(e)))<0?0:e,i):[]},dn.takeRightWhile=function(t,e){return t&&t.length?Wi(t,Ro(e,3),!1,!0):[]},dn.takeWhile=function(t,e){return t&&t.length?Wi(t,Ro(e,3)):[]},dn.tap=function(t,e){return e(t),t},dn.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new ie(o);return js(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),is(t,e,{leading:n,maxWait:e,trailing:i})},dn.thru=Wa,dn.toArray=Ns,dn.toPairs=fu,dn.toPairsIn=hu,dn.toPath=function(t){return _s(t)?Je(t,la):Ps(t)?[t]:ro(ca($s(t)))},dn.toPlainObject=Vs,dn.transform=function(t,e,r){var n=_s(t),i=n||ws(t)||Rs(t);if(e=Ro(e,4),null==r){var o=t&&t.constructor;r=i?n?new o:[]:js(t)&&Ms(o)?pn(Ie(t)):{}}return(i?$e:Hn)(t,function(t,n,i){return e(r,t,n,i)}),r},dn.unary=function(t){return ts(t,1)},dn.union=Fa,dn.unionBy=Oa,dn.unionWith=Aa,dn.uniq=function(t){return t&&t.length?Li(t):[]},dn.uniqBy=function(t,e){return t&&t.length?Li(t,Ro(e,2)):[]},dn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Li(t,r,e):[]},dn.unset=function(t,e){return null==t||zi(t,e)},dn.unzip=Ea,dn.unzipWith=Ia,dn.update=function(t,e,r){return null==t?t:Ni(t,e,$i(r))},dn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ni(t,e,$i(n),i)},dn.values=du,dn.valuesIn=function(t){return null==t?[]:gr(t,ou(t))},dn.without=Ca,dn.words=Mu,dn.wrap=function(t,e){return ls($i(e),t)},dn.xor=Ba,dn.xorBy=Pa,dn.xorWith=Ra,dn.zip=La,dn.zipObject=function(t,e){return Ui(t||[],e||[],Fn)},dn.zipObjectDeep=function(t,e){return Ui(t||[],e||[],Ti)},dn.zipWith=za,dn.entries=fu,dn.entriesIn=hu,dn.extend=Hs,dn.extendWith=Zs,Bu(dn,dn),dn.add=Vu,dn.attempt=xu,dn.camelCase=pu,dn.capitalize=gu,dn.ceil=$u,dn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Us(n))==n?n:0),e!==r&&(e=(e=Us(e))==e?e:0),Bn(Us(t),e,n)},dn.clone=function(t){return Pn(t,f)},dn.cloneDeep=function(t){return Pn(t,c|f)},dn.cloneDeepWith=function(t,e){return Pn(t,c|f,e="function"==typeof e?e:r)},dn.cloneWith=function(t,e){return Pn(t,f,e="function"==typeof e?e:r)},dn.conformsTo=function(t,e){return null==e||Rn(t,e,iu(e))},dn.deburr=vu,dn.defaultTo=function(t,e){return null==t||t!=t?e:t},dn.divide=Gu,dn.endsWith=function(t,e,n){t=$s(t),e=Ri(e);var i=t.length,o=n=n===r?i:Bn(Ds(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},dn.eq=ds,dn.escape=function(t){return(t=$s(t))&&St.test(t)?t.replace(wt,br):t},dn.escapeRegExp=function(t){return(t=$s(t))&&Et.test(t)?t.replace(At,"\\$&"):t},dn.every=function(t,e,n){var i=_s(t)?He:Dn;return n&&Ho(t,e,n)&&(e=r),i(t,Ro(e,3))},dn.find=Ua,dn.findIndex=va,dn.findKey=function(t,e){return nr(t,Ro(e,3),Hn)},dn.findLast=Va,dn.findLastIndex=_a,dn.findLastKey=function(t,e){return nr(t,Ro(e,3),Zn)},dn.floor=Hu,dn.forEach=$a,dn.forEachRight=Ga,dn.forIn=function(t,e){return null==t?t:$n(t,Ro(e,3),ou)},dn.forInRight=function(t,e){return null==t?t:Gn(t,Ro(e,3),ou)},dn.forOwn=function(t,e){return t&&Hn(t,Ro(e,3))},dn.forOwnRight=function(t,e){return t&&Zn(t,Ro(e,3))},dn.get=Xs,dn.gt=ps,dn.gte=gs,dn.has=function(t,e){return null!=t&&Uo(t,e,ti)},dn.hasIn=tu,dn.head=ya,dn.identity=Au,dn.includes=function(t,e,r,n){t=ys(t)?t:du(t),r=r&&!n?Ds(r):0;var i=t.length;return r<0&&(r=Vr(i+r,0)),Bs(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&or(t,e,r)>-1},dn.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Ds(r);return i<0&&(i=Vr(n+i,0)),or(t,e,i)},dn.inRange=function(t,e,n){return e=Ws(e),n===r?(n=e,e=0):n=Ws(n),function(t,e,r){return t>=$r(e,r)&&t<Vr(e,r)}(t=Us(t),e,n)},dn.invoke=nu,dn.isArguments=vs,dn.isArray=_s,dn.isArrayBuffer=ms,dn.isArrayLike=ys,dn.isArrayLikeObject=bs,dn.isBoolean=function(t){return!0===t||!1===t||Fs(t)&&Yn(t)==q},dn.isBuffer=ws,dn.isDate=ks,dn.isElement=function(t){return Fs(t)&&1===t.nodeType&&!Es(t)},dn.isEmpty=function(t){if(null==t)return!0;if(ys(t)&&(_s(t)||"string"==typeof t||"function"==typeof t.splice||ws(t)||Rs(t)||vs(t)))return!t.length;var e=qo(t);if(e==Z||e==tt)return!t.size;if(Jo(t))return!ci(t).length;for(var r in t)if(le.call(t,r))return!1;return!0},dn.isEqual=function(t,e){return oi(t,e)},dn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?oi(t,e,r,n):!!i},dn.isError=Ss,dn.isFinite=function(t){return"number"==typeof t&&Dr(t)},dn.isFunction=Ms,dn.isInteger=xs,dn.isLength=Ts,dn.isMap=Os,dn.isMatch=function(t,e){return t===e||ai(t,e,zo(e))},dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,ai(t,e,zo(e),n)},dn.isNaN=function(t){return As(t)&&t!=+t},dn.isNative=function(t){if(Qo(t))throw new Yt(i);return si(t)},dn.isNil=function(t){return null==t},dn.isNull=function(t){return null===t},dn.isNumber=As,dn.isObject=js,dn.isObjectLike=Fs,dn.isPlainObject=Es,dn.isRegExp=Is,dn.isSafeInteger=function(t){return xs(t)&&t>=-E&&t<=E},dn.isSet=Cs,dn.isString=Bs,dn.isSymbol=Ps,dn.isTypedArray=Rs,dn.isUndefined=function(t){return t===r},dn.isWeakMap=function(t){return Fs(t)&&qo(t)==it},dn.isWeakSet=function(t){return Fs(t)&&Yn(t)==ot},dn.join=function(t,e){return null==t?"":qr.call(t,e)},dn.kebabCase=_u,dn.last=Sa,dn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Ds(n))<0?Vr(i+o,0):$r(o,i-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,o):ir(t,sr,o,!0)},dn.lowerCase=mu,dn.lowerFirst=yu,dn.lt=Ls,dn.lte=zs,dn.max=function(t){return t&&t.length?qn(t,Au,Xn):r},dn.maxBy=function(t,e){return t&&t.length?qn(t,Ro(e,2),Xn):r},dn.mean=function(t){return ur(t,Au)},dn.meanBy=function(t,e){return ur(t,Ro(e,2))},dn.min=function(t){return t&&t.length?qn(t,Au,fi):r},dn.minBy=function(t,e){return t&&t.length?qn(t,Ro(e,2),fi):r},dn.stubArray=qu,dn.stubFalse=Uu,dn.stubObject=function(){return{}},dn.stubString=function(){return""},dn.stubTrue=function(){return!0},dn.multiply=Ku,dn.nth=function(t,e){return t&&t.length?vi(t,Ds(e)):r},dn.noConflict=function(){return Ee._===this&&(Ee._=ge),this},dn.noop=Pu,dn.now=Xa,dn.pad=function(t,e,r){t=$s(t);var n=(e=Ds(e))?Fr(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return mo(zr(i),r)+t+mo(Lr(i),r)},dn.padEnd=function(t,e,r){t=$s(t);var n=(e=Ds(e))?Fr(t):0;return e&&n<e?t+mo(e-n,r):t},dn.padStart=function(t,e,r){t=$s(t);var n=(e=Ds(e))?Fr(t):0;return e&&n<e?mo(e-n,r)+t:t},dn.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),Hr($s(t).replace(Ct,""),e||0)},dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ho(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Ws(t),e===r?(e=t,t=0):e=Ws(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Zr();return $r(t+o*(e-t+je("1e-"+((o+"").length-1))),e)}return wi(t,e)},dn.reduce=function(t,e,r){var n=_s(t)?Xe:fr,i=arguments.length<3;return n(t,Ro(e,4),r,i,Nn)},dn.reduceRight=function(t,e,r){var n=_s(t)?tr:fr,i=arguments.length<3;return n(t,Ro(e,4),r,i,Wn)},dn.repeat=function(t,e,n){return e=(n?Ho(t,e,n):e===r)?1:Ds(e),ki($s(t),e)},dn.replace=function(){var t=arguments,e=$s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dn.result=function(t,e,n){var i=-1,o=(e=Gi(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[la(e[i])];a===r&&(i=o,a=n),t=Ms(a)?a.call(t):a}return t},dn.round=Qu,dn.runInContext=t,dn.sample=function(t){return(_s(t)?Mn:Mi)(t)},dn.size=function(t){if(null==t)return 0;if(ys(t))return Bs(t)?Fr(t):t.length;var e=qo(t);return e==Z||e==tt?t.size:ci(t).length},dn.snakeCase=bu,dn.some=function(t,e,n){var i=_s(t)?er:Ei;return n&&Ho(t,e,n)&&(e=r),i(t,Ro(e,3))},dn.sortedIndex=function(t,e){return Ii(t,e)},dn.sortedIndexBy=function(t,e,r){return Ci(t,e,Ro(r,2))},dn.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=Ii(t,e);if(n<r&&ds(t[n],e))return n}return-1},dn.sortedLastIndex=function(t,e){return Ii(t,e,!0)},dn.sortedLastIndexBy=function(t,e,r){return Ci(t,e,Ro(r,2),!0)},dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=Ii(t,e,!0)-1;if(ds(t[r],e))return r}return-1},dn.startCase=wu,dn.startsWith=function(t,e,r){return t=$s(t),r=null==r?0:Bn(Ds(r),0,t.length),e=Ri(e),t.slice(r,r+e.length)==e},dn.subtract=Ju,dn.sum=function(t){return t&&t.length?hr(t,Au):0},dn.sumBy=function(t,e){return t&&t.length?hr(t,Ro(e,2)):0},dn.template=function(t,e,n){var i=dn.templateSettings;n&&Ho(t,e,n)&&(e=r),t=$s(t),e=Zs({},e,i,To);var o,a,s=Zs({},e.imports,i.imports,To),u=iu(s),c=gr(s,u),l=0,f=e.interpolate||Zt,h="__p += '",d=re((e.escape||Zt).source+"|"+f.source+"|"+(f===Tt?Wt:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),p="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Se+"]")+"\n";t.replace(d,function(e,r,n,i,s,u){return n||(n=i),h+=t.slice(l,u).replace(Kt,wr),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var g=le.call(e,"variable")&&e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(_t,""):h).replace(mt,"$1").replace(yt,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=xu(function(){return Xt(u,p+"return "+h).apply(r,c)});if(v.source=h,Ss(v))throw v;return v},dn.times=function(t,e){if((t=Ds(t))<1||t>E)return[];var r=B,n=$r(t,B);e=Ro(e),t-=B;for(var i=dr(n,e);++r<t;)e(r);return i},dn.toFinite=Ws,dn.toInteger=Ds,dn.toLength=qs,dn.toLower=function(t){return $s(t).toLowerCase()},dn.toNumber=Us,dn.toSafeInteger=function(t){return t?Bn(Ds(t),-E,E):0===t?t:0},dn.toString=$s,dn.toUpper=function(t){return $s(t).toUpperCase()},dn.trim=function(t,e,n){if((t=$s(t))&&(n||e===r))return t.replace(It,"");if(!t||!(e=Ri(e)))return t;var i=Or(t),o=Or(e);return Zi(i,_r(i,o),mr(i,o)+1).join("")},dn.trimEnd=function(t,e,n){if((t=$s(t))&&(n||e===r))return t.replace(Bt,"");if(!t||!(e=Ri(e)))return t;var i=Or(t);return Zi(i,0,mr(i,Or(e))+1).join("")},dn.trimStart=function(t,e,n){if((t=$s(t))&&(n||e===r))return t.replace(Ct,"");if(!t||!(e=Ri(e)))return t;var i=Or(t);return Zi(i,_r(i,Or(e))).join("")},dn.truncate=function(t,e){var n=M,i=x;if(js(e)){var o="separator"in e?e.separator:o;n="length"in e?Ds(e.length):n,i="omission"in e?Ri(e.omission):i}var a=(t=$s(t)).length;if(kr(t)){var s=Or(t);a=s.length}if(n>=a)return t;var u=n-Fr(i);if(u<1)return i;var c=s?Zi(s,0,u).join(""):t.slice(0,u);if(o===r)return c+i;if(s&&(u+=c.length-u),Is(o)){if(t.slice(u).search(o)){var l,f=c;for(o.global||(o=re(o.source,$s(Dt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var h=l.index;c=c.slice(0,h===r?u:h)}}else if(t.indexOf(Ri(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+i},dn.unescape=function(t){return(t=$s(t))&&kt.test(t)?t.replace(bt,Ar):t},dn.uniqueId=function(t){var e=++fe;return $s(t)+e},dn.upperCase=ku,dn.upperFirst=Su,dn.each=$a,dn.eachRight=Ga,dn.first=ya,Bu(dn,(Zu={},Hn(dn,function(t,e){le.call(dn.prototype,e)||(Zu[e]=t)}),Zu),{chain:!1}),dn.VERSION="4.17.15",$e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dn[t].placeholder=dn}),$e(["drop","take"],function(t,e){_n.prototype[t]=function(n){n=n===r?1:Vr(Ds(n),0);var i=this.__filtered__&&!e?new _n(this):this.clone();return i.__filtered__?i.__takeCount__=$r(n,i.__takeCount__):i.__views__.push({size:$r(n,B),type:t+(i.__dir__<0?"Right":"")}),i},_n.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),$e(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==F||3==r;_n.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ro(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),$e(["head","last"],function(t,e){var r="take"+(e?"Right":"");_n.prototype[t]=function(){return this[r](1).value()[0]}}),$e(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");_n.prototype[t]=function(){return this.__filtered__?new _n(this):this[r](1)}}),_n.prototype.compact=function(){return this.filter(Au)},_n.prototype.find=function(t){return this.filter(t).head()},_n.prototype.findLast=function(t){return this.reverse().find(t)},_n.prototype.invokeMap=Si(function(t,e){return"function"==typeof t?new _n(this):this.map(function(r){return ni(r,t,e)})}),_n.prototype.reject=function(t){return this.filter(us(Ro(t)))},_n.prototype.slice=function(t,e){t=Ds(t);var n=this;return n.__filtered__&&(t>0||e<0)?new _n(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Ds(e))<0?n.dropRight(-e):n.take(e-t)),n)},_n.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_n.prototype.toArray=function(){return this.take(B)},Hn(_n.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=dn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(dn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof _n,c=s[0],l=u||_s(e),f=function(t){var e=o.apply(dn,Ye([t],s));return i&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=a&&!h,g=u&&!d;if(!a&&l){e=g?e:new _n(this);var v=t.apply(e,s);return v.__actions__.push({func:Wa,args:[f],thisArg:r}),new vn(v,h)}return p&&g?t.apply(this,s):(v=this.thru(f),p?i?v.value()[0]:v.value():v)})}),$e(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);dn.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(_s(i)?i:[],t)}return this[r](function(r){return e.apply(_s(r)?r:[],t)})}}),Hn(_n.prototype,function(t,e){var r=dn[e];if(r){var n=r.name+"";le.call(nn,n)||(nn[n]=[]),nn[n].push({name:e,func:r})}}),nn[po(r,g).name]=[{name:"wrapper",func:r}],_n.prototype.clone=function(){var t=new _n(this.__wrapped__);return t.__actions__=ro(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ro(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ro(this.__views__),t},_n.prototype.reverse=function(){if(this.__filtered__){var t=new _n(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_n.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=_s(t),n=e<0,i=r?t.length:0,o=function(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=$r(e,t+a);break;case"takeRight":t=Vr(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=n?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=$r(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return Di(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var g=-1,v=t[c+=e];++g<f;){var _=l[g],m=_.iteratee,y=_.type,b=m(v);if(y==O)v=b;else if(!b){if(y==F)continue t;break t}}p[h++]=v}return p},dn.prototype.at=Da,dn.prototype.chain=function(){return Na(this)},dn.prototype.commit=function(){return new vn(this.value(),this.__chain__)},dn.prototype.next=function(){this.__values__===r&&(this.__values__=Ns(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},dn.prototype.plant=function(t){for(var e,n=this;n instanceof gn;){var i=ha(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _n){var e=t;return this.__actions__.length&&(e=new _n(this)),(e=e.reverse()).__actions__.push({func:Wa,args:[ja],thisArg:r}),new vn(e,this.__chain__)}return this.thru(ja)},dn.prototype.toJSON=dn.prototype.valueOf=dn.prototype.value=function(){return Di(this.__wrapped__,this.__actions__)},dn.prototype.first=dn.prototype.head,lr&&(dn.prototype[lr]=function(){return this}),dn}();Ce?((Ce.exports=Er)._=Er,Ie._=Er):Ee._=Er}).call(R)}(L={exports:{}},L.exports),L.exports),N=z.orderBy,W=z.filter;const D="new",q="loading",U="loaded",V="joining-meeting",$="joined-meeting",G="left-meeting",H="error",Z="loading",K="loaded",Q="started-camera",J="camera-error",Y="joining-meeting",X="joined-meeting",tt="left-meeting",et="participant-joined",rt="participant-updated",nt="participant-left",it="track-started",ot="track-stopped",at="recording-started",st="recording-stopped",ut="recording-stats",ct="recording-error",lt="recording-upload-completed",ft="app-message",ht="input-event",dt="local-screen-share-started",pt="local-screen-share-stopped",gt="active-speaker-change",vt="network-quality-change",_t="network-connection",mt="fullscreen",yt="exited-fullscreen",bt="error",wt=4096,kt="iframe-call-message",St="start-camera",Mt="set-input-devices",xt="set-output-device",Tt="get-input-devices",jt="join-meeting",Ft="leave-meeting",Ot="update-participant",At="local-audio",Et="local-video",It="local-screen-start",Ct="local-screen-stop",Bt="local-recording-start",Pt="local-recording-stop",Rt="load-css",Lt="set-bandwidth",zt="get-calc-stats",Nt="enumerate-devices",Wt="cycle-camera",Dt="cycle-mic",qt="app-msg",Ut="add-fake-participant",Vt="set-show-names",$t="register-input-handler",Gt="set-daily-lang",Ht="detect-all-faces",Zt="lib-room-info",Kt="set-network-topology",Qt="daily-method-set-play-ding",Jt="daily-custom-track",Yt="request-fullscreen",Xt="request-exit-fullscreen",te={url:{validate:t=>"string"==typeof t,help:"url should be a string"},token:{validate:t=>"string"==typeof t,help:"token should be a string",queryString:"t"},dailyConfig:{validate:t=>(window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=t.experimentalGetUserMediaConstraintsModify,delete t.experimentalGetUserMediaConstraintsModify,!0)},lang:{validate:t=>"en-us"===t||"en"===t||"fr"===t},userName:!0,showLeaveButton:!0,showFullscreenButton:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:(t,e)=>(e._preloadCache.videoDeviceId=t,!0)},audioSource:{validate:(t,e)=>(e._preloadCache.audioDeviceId=t,!0)},layout:{validate:t=>"custom-v1"===t||"browser"===t||"none"===t,help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"}},ee={styles:{validate:t=>{for(var e in t)if("cam"!==e&&"screen"!==e)return!1;if(t.cam)for(var e in t.cam)if("div"!==e&&"video"!==e)return!1;if(t.screen)for(var e in t.screen)if("div"!==e&&"video"!==e)return!1;return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setAudio:!0,setVideo:!0,eject:!0};class re extends t{static supportedBrowser(){const t=d.getParser(window.navigator.userAgent),e=t.getBrowser(),r=d.parse(window.navigator.userAgent);return{supported:t.satisfies({electron:">=6",chromium:">=61",chrome:">=61",firefox:">=63",opera:">=61",safari:">=12",edge:">=18",iOS:{chromium:"<0",chrome:"<0",firefox:"<0",opera:"<0",safari:">=12",edge:"<0"}}),mobile:"mobile"===r.platform.type,name:e.name,version:e.version}}static createCallObject(t={}){return t.layout="none",new re(null,t)}static wrap(t,e={}){if(!t||!t.contentWindow||"string"!=typeof t.src)throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return e.layout||(e.customLayout?e.layout="custom-v1":e.layout="browser"),new re(t,e)}static createFrame(t,e){let r,n;t&&e?(r=t,n=e):t&&t.append?(r=t,n={}):(r=document.body,n=t||{});let i=n.iframeStyle;i||(i=r===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});let o=document.createElement("iframe");return window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?o.allow="microphone, camera":o.allow="microphone; camera; autoplay",o.style.visibility="hidden",r.appendChild(o),o.style.visibility=null,Object.keys(i).forEach(t=>o.style[t]=i[t]),n.layout||(n.customLayout?n.layout="custom-v1":n.layout="browser"),new re(o,n)}static createTransparentFrame(t={}){let e=document.createElement("iframe");return e.allow="microphone; camera; autoplay",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      pointer-events: none;\n    ",document.body.appendChild(e),t.layout||(t.layout="custom-v1"),re.wrap(e,t)}constructor(t,e={}){super(),this._iframe=t,this._callObjectMode="none"===e.layout&&!this._iframe,this._preloadCache={audioDeviceId:null,videoDeviceId:null,outputDeviceId:null},this._callObjectMode&&(window._dailyPreloadCache=this._preloadCache),this.validateProperties(e),this.properties={...e},this._loaded=!1,this._callObjectScriptLoaded=!1,this._meetingState=D,this._participants={},this._inputEventsOn={},this._network={threshold:"good",quality:100},this._activeSpeaker={},this._messageCallbacks={},this._callFrameId=Date.now()+Math.random().toString(),this._messageListener=(t=>{!t.data||"iframe-call-message"!==t.data.what||t.data.callFrameId&&t.data.callFrameId!==this._callFrameId||t.data.from&&"module"===t.data.from||(delete t.data.from,this.handleMessage(t.data))}),this._iframe&&(this._iframe.requestFullscreen?this._iframe.addEventListener("fullscreenchange",t=>{document.fullscreenElement===this._iframe?(this.emit(mt),this._sendIframeMsg({action:mt})):(this.emit(yt),this._sendIframeMsg({action:yt}))}):this._iframe.webkitRequestFullscreen&&this._iframe.addEventListener("webkitfullscreenchange",t=>{document.webkitFullscreenElement===this._iframe?(this.emit(mt),this._sendIframeMsg({action:mt})):(this.emit(yt),this._sendIframeMsg({action:yt}))})),window.addEventListener("message",this._messageListener)}async destroy(){try{"joined-meeting"===this._meetingState&&await this.leave()}catch(t){}let t=this.iframe();if(t){let e=t.parentElement;e&&e.removeChild(t)}window.removeEventListener("message",this._messageListener)}loadCss({bodyClass:t,cssFile:e,cssText:r}){return this._sendIframeMsg({action:Rt,cssFile:this.absoluteUrl(e),bodyClass:t,cssText:r}),this}iframe(){return this._iframe}meetingState(){return this._meetingState}participants(){return this._participants}updateParticipant(t,e){if(this._participants.local&&this._participants.local.session_id===t&&(t="local"),t&&e&&this._participants[t]){for(var r in e){if(!ee[r])throw new Error(`unrecognized updateParticipant property ${r}`);if(ee[r].validate&&!ee[r].validate(e[r]))throw new Error(ee[r].help)}this._sendIframeMsg({action:Ot,id:t,properties:e})}return this}updateParticipants(t){for(var e in t)this.updateParticipant(e,t[e]);return this}localAudio(){return this._participants.local?this._participants.local.audio:null}localVideo(){return this._participants.local?this._participants.local.video:null}setLocalAudio(t){return this._sendIframeMsg({action:At,state:t}),this}setLocalVideo(t){return this._sendIframeMsg({action:Et,state:t}),this}setBandwidth({kbs:t,trackConstraints:e}){return this._sendIframeMsg({action:Lt,kbs:t,trackConstraints:e}),this}setDailyLang(t){this._sendIframeMsg({action:Gt,lang:t})}startCamera(t={}){return new Promise(async(e,r)=>{this._loaded||await this.load(t),this._sendIframeMsg({action:St,properties:ne(this.properties)},t=>{delete t.action,delete t.callbackStamp,e(t)})})}cycleCamera(){return new Promise((t,e)=>{this._sendIframeMsg({action:Wt},e=>{t({device:e.device})})})}cycleMic(){return new Promise((t,e)=>{this._sendIframeMsg({action:Dt},e=>{t({device:e.device})})})}setInputDevices({audioDeviceId:t,videoDeviceId:e,audioSource:r,videoSource:n}){return void 0!==r&&(t=r),void 0!==n&&(e=n),t&&(this._preloadCache.audioDeviceId=t),e&&(this._preloadCache.videoDeviceId=e),this._callObjectMode&&this._meetingState!==$?this:(t instanceof MediaStreamTrack&&(t=Jt),e instanceof MediaStreamTrack&&(e=Jt),this._sendIframeMsg({action:Mt,audioDeviceId:t,videoDeviceId:e}),this)}setOutputDevice({outputDeviceId:t}){return t&&(this._preloadCache.outputDeviceId=t),this._callObjectMode&&this._meetingState!==$?this:(this._sendIframeMsg({action:xt,outputDeviceId:t}),this)}getInputDevices(){return this._callObjectMode&&this._meetingState!==$?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise((t,e)=>{this._sendIframeMsg({action:Tt},e=>{delete e.action,delete e.callbackStamp,t(e)})})}async load(t){if(t&&(this.validateProperties(t),this.properties={...this.properties,...t}),!this.properties.url)throw new Error("can't load meeting because url property isn't set");this._meetingState=q;try{this.emit(Z,{action:Z})}catch(t){console.log("could not emit 'loading'")}return this._callObjectMode?new Promise((t,e)=>{if(document)if(this._callObjectScriptLoaded)window._dailyCallObjectSetup(),this._loaded=!0,this._meetingState=U,this.emit(K,{action:K}),t();else{const e=document.getElementsByTagName("head")[0],r=document.createElement("script");r.onload=(async()=>{this._callObjectScriptLoaded=!0,this._loaded=!0,this._meetingState=U,t()});let n=new URL(this.properties.url);r.src=`${n.origin}/static/call-machine-object-bundle.js`,e.appendChild(r)}else console.error("need to create call object in a DOM/web context")}):(this._iframe.src=this.assembleMeetingUrl(),new Promise((t,e)=>{this._loadedCallback=(()=>{this._loaded=!0,this._meetingState=U,(this.properties.cssFile||this.properties.cssText)&&this.loadCss(this.properties);for(let t in this._inputEventsOn)this._sendIframeMsg({action:$t,on:t});t()})}))}async join(t={}){let e=!1;if(this._loaded){if(e=!(!this.properties.cssFile&&!this.properties.cssText),t.url&&t.url!==this.properties.url)return console.error("error: can't change the daily.co call url after load()"),Promise.reject()}else await this.load(t);if(this._meetingState!==$&&this._meetingState!==V){this._meetingState=V;try{this.emit(Y,{action:Y})}catch(t){console.log("could not emit 'joining-meeting'")}return this._sendIframeMsg({action:jt,properties:ne(this.properties),preloadCache:ne(this._preloadCache)}),new Promise((t,r)=>{this._joinedCallback=(r=>{if(this._meetingState=$,r)for(var n in r){this.fixupParticipant(r[n]);let t=r[n].local?"local":r[n].session_id;this.matchParticipantTracks(t,r[n]),this._participants[n]={...r[n]}}e&&this.loadCss(this.properties),t(r)})})}console.warn("already joined meeting, call leave() before joining again")}async leave(){return new Promise((t,e)=>{this._sendIframeMsg({action:Ft},()=>{this._iframe,this._loaded=!1,this._meetingState=G,this._participants={},this._preloadCache;try{this.emit(G,{action:G})}catch(t){console.log("could not emit 'left-meeting'")}t()})})}startScreenShare(t){this._sendIframeMsg({action:It,captureOptions:t})}stopScreenShare(){this._sendIframeMsg({action:Ct})}startRecording(){this._sendIframeMsg({action:Bt})}stopRecording(){this._sendIframeMsg({action:Pt})}getNetworkStats(){if(this._meetingState!==$){return{stats:{latest:{}}}}return new Promise((t,e)=>{this._sendIframeMsg({action:zt},e=>{t({stats:e.stats,...this._network})})})}getActiveSpeaker(){return this._activeSpeaker}async enumerateDevices(t){if(this._callObjectMode){return{devices:(await navigator.mediaDevices.enumerateDevices()).map(t=>JSON.parse(JSON.stringify(t)))}}return new Promise((e,r)=>{this._sendIframeMsg({action:Nt,kind:t},t=>{e({devices:t.devices})})})}sendAppMessage(t,e="*"){if(JSON.stringify(t).length>wt)throw new Error("Message data too large. Max size is "+wt);return this._sendIframeMsg({action:qt,data:t,to:e}),this}addFakeParticipant(t){return this._sendIframeMsg({action:Ut,...t}),this}setShowNamesMode(t){return t&&"always"!==t&&"never"!==t?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this._sendIframeMsg({action:Vt,mode:t}),this)}detectAllFaces(){return new Promise((t,e)=>{this._sendIframeMsg({action:Ht},e=>{delete e.action,delete e.callbackStamp,t(e)})})}async requestFullscreen(){if(this._iframe&&!document.fullscreenElement)try{await this._iframe.requestFullscreen?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(t){console.log("could not make video call fullscreen",t)}}exitFullscreen(){document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}async room(){return this._meetingState!==$?null:new Promise((t,e)=>{this._sendIframeMsg({action:Zt},e=>{delete e.action,delete e.callbackStamp,t(e)})})}async geo(){return new Promise(async(t,e)=>{try{let e="https://gs.daily.co/_ks_/x-swsl/:",r=await fetch(e);t({current:(await r.json()).geo})}catch(e){console.error("geo lookup failed",e),t({current:""})}})}async setNetworkTopology(t){return new Promise(async(e,r)=>{this._sendIframeMsg({action:Kt,opts:t},t=>{t.error?r({error:t.error}):e({workerId:t.workerId})})})}setPlayNewParticipantSound(t){if("number"!=typeof t&&!0!==t&&!1!==t)throw new Error(`argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ${t}`);this._sendIframeMsg({action:Qt,arg:t})}validateProperties(t){for(var e in t){if(!te[e])throw new Error(`unrecognized property '${e}'`);if(te[e].validate&&!te[e].validate(t[e],this))throw new Error(`property '${e}': ${te[e].help}`)}}assembleMeetingUrl(){let t={...this.properties,emb:this._callFrameId},e=t.url.match(/\?/)?"&":"?";return t.url+e+Object.keys(te).filter(e=>te[e].queryString&&void 0!==t[e]).map(e=>`${te[e].queryString}=${t[e]}`).join("&")}_sendIframeMsg(t,e){let r={...t};if(r.what=kt,r.from="module",r.callFrameId=this._callFrameId,e){let t=Date.now();this._messageCallbacks[t]=e,r.callbackStamp=t}(this._iframe?this._iframe.contentWindow:window).postMessage(r,"*")}handleMessage(t){switch(t.callbackStamp&&this._messageCallbacks[t.callbackStamp]&&(this._messageCallbacks[t.callbackStamp].call(this,t),delete this._messageCallbacks[t.callbackStamp]),delete t.what,delete t.callbackStamp,t.action){case K:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}break;case X:this._joinedCallback&&(this._joinedCallback(t.participants),this._joinedCallback=null);try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}break;case et:case rt:if("left-meeting"===this._meetingState)return;if(this.fixupParticipant(t),t.participant&&t.participant.session_id){let e=t.participant.local?"local":t.participant.session_id;this.matchParticipantTracks(e,t.participant);try{this.maybeEventTrackStopped(this._participants[e],t.participant,"audioTrack"),this.maybeEventTrackStopped(this._participants[e],t.participant,"videoTrack"),this.maybeEventTrackStopped(this._participants[e],t.participant,"screenVideoTrack"),this.maybeEventTrackStarted(this._participants[e],t.participant,"audioTrack"),this.maybeEventTrackStarted(this._participants[e],t.participant,"videoTrack"),this.maybeEventTrackStarted(this._participants[e],t.participant,"screenVideoTrack")}catch(t){console.error("track events error",t)}if(!this.compareEqualForParticipantUpdateEvent(t.participant,this._participants[e])){this._participants[e]={...t.participant};try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}}}break;case nt:if(this.fixupParticipant(t),t.participant&&t.participant.session_id){let e=this._participants[t.participant.session_id];e&&(this.maybeEventTrackStopped(e,null,"audioTrack"),this.maybeEventTrackStopped(e,null,"videoTrack"),this.maybeEventTrackStopped(e,null,"screenVideoTrack")),delete this._participants[t.participant.session_id];try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}}break;case bt:this._iframe&&(this._iframe.src=""),this._loaded=!1,this._meetingState=H;try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}break;case tt:this._meetingState!==H&&(this._meetingState=G);try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}break;case ht:let e=this._participants[t.session_id];e||(e=t.session_id===this._participants.local.session_id?this._participants.local:{});try{this.emit(t.event.type,{action:t.event.type,event:t.event,participant:{...e}})}catch(e){console.log("could not emit",t)}break;case vt:let{threshold:r,quality:n}=t;if(r!==this._network.threshold||n!==this._network.quality){this._network.quality=n,this._network.threshold=r;try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}}break;case gt:let{activeSpeaker:i}=t;if(this._activeSpeaker.peerId!==i.peerId){this._activeSpeaker.peerId=i.peerId;try{this.emit(t.action,{action:t.action,activeSpeaker:this._activeSpeaker})}catch(e){console.log("could not emit",t)}}break;case at:case st:case ut:case ct:case lt:case Q:case J:case ft:case dt:case pt:case _t:try{this.emit(t.action,t)}catch(e){console.log("could not emit",t)}break;case Yt:this.requestFullscreen();break;case Xt:this.exitFullscreen()}}fixupParticipant(t){let e=t.participant?t.participant:t;e.id&&(e.owner=!!e.owner,e.session_id=e.id,e.user_name=e.name,e.joined_at=e.joinedAt,delete e.id,delete e.name,delete e.joinedAt)}matchParticipantTracks(t,e){if(!this._callObjectMode)return;let r=store.getState();if("local"===t){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(t){}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(t){}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenVideoTrack||(e.screen=!1)}catch(t){}return}let n=!0;try{let t=r.participants[e.session_id];t&&"peer-to-peer"===t.public.rtcType.impl&&t.private&&!["connected","completed"].includes(t.private.peeringState)&&(n=!1)}catch(t){console.error(t)}if(!n)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{const t=r.streams,n=this._participants[e.session_id];if(e.audio){let r=N(W(t,t=>t.participantId===e.session_id&&"cam"===t.type&&t.pendingTrack&&"audio"===t.pendingTrack.kind),"starttime","desc");r&&r[0]&&r[0].pendingTrack&&(n&&n.audioTrack&&n.audioTrack.id===r[0].pendingTrack.id?e.audioTrack=r[0].pendingTrack:r[0].pendingTrack.muted||(e.audioTrack=r[0].pendingTrack)),e.audioTrack||(e.audio=!1)}if(e.video){let r=N(W(t,t=>t.participantId===e.session_id&&"cam"===t.type&&t.pendingTrack&&"video"===t.pendingTrack.kind),"starttime","desc");r&&r[0]&&r[0].pendingTrack&&(n&&n.videoTrack&&n.videoTrack.id===r[0].pendingTrack.id?e.videoTrack=r[0].pendingTrack:r[0].pendingTrack.muted||(e.videoTrack=r[0].pendingTrack)),e.videoTrack||(e.video=!1)}if(e.screen){let r=N(W(t,t=>t.participantId===e.session_id&&"screen"===t.type&&t.pendingTrack&&"video"===t.pendingTrack.kind),"starttime","desc");r&&r[0]&&r[0].pendingTrack&&(n&&n.screenVideoTrack&&n.screenVideoTrack.id===r[0].pendingTrack.id?e.screenVideoTrack=r[0].pendingTrack:r[0].pendingTrack.muted||(e.screenVideoTrack=r[0].pendingTrack)),e.screenVideoTrack||(e.screen=!1)}}catch(t){console.error("unexpected error matching up tracks",t)}}maybeEventTrackStopped(t,e,r){if(t&&(t[r]&&"ended"===t[r].readyState||t[r]&&(!e||!e[r])||t[r]&&t[r].id!==e[r].id))try{this.emit(ot,{action:ot,track:t[r],participant:e})}catch(t){console.log("could not emit",t)}}maybeEventTrackStarted(t,e,r){if(e[r]&&(!t||!t[r])||e[r]&&"ended"===t[r].readyState||e[r]&&e[r].id!==t[r].id)try{this.emit(it,{action:it,track:e[r],participant:e})}catch(t){console.log("could not emit",t)}}compareEqualForParticipantUpdateEvent(t,e){return!!P(t,e)&&((!t.videoTrack||!e.videoTrack||t.videoTrack.id===e.videoTrack.id&&t.videoTrack.muted===e.videoTrack.muted&&t.videoTrack.enabled===e.videoTrack.enabled)&&(!t.audioTrack||!e.audioTrack||t.audioTrack.id===e.audioTrack.id&&t.audioTrack.muted===e.audioTrack.muted&&t.audioTrack.enabled===e.audioTrack.enabled))}absoluteUrl(t){if(void 0===t)return;let e=document.createElement("a");return e.href=t,e.href}on(e,r){return this._inputEventsOn[e]={},this._sendIframeMsg({action:$t,on:e}),t.prototype.on.call(this,e,r)}once(e,r){return this._inputEventsOn[e]={},this._sendIframeMsg({action:$t,on:e}),t.prototype.once.call(this,e,r)}off(e,r){return delete this._inputEventsOn[e],this._sendIframeMsg({action:$t,off:e}),t.prototype.off.call(this,e,r)}sayHello(){const t="hello, world.";return console.log(t),t}}function ne(t){const e={};for(let r in t)t[r]instanceof MediaStreamTrack?e[r]=Jt:"dailyConfig"===r?(t[r].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=t[r].modifyLocalSdpHook),delete t[r].modifyLocalSdpHook),t[r].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook),delete t[r].modifyRemoteSdpHook),e[r]=t[r]):e[r]=t[r];return e}export default re;export{X as DAILY_EVENT_JOINED_MEETING,Y as DAILY_EVENT_JOINING_MEETING,tt as DAILY_EVENT_LEFT_MEETING,H as DAILY_STATE_ERROR,$ as DAILY_STATE_JOINED,V as DAILY_STATE_JOINING,G as DAILY_STATE_LEFT,D as DAILY_STATE_NEW};
